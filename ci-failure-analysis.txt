Run Tests	Run unit and integration tests	ï»¿2025-11-01T15:26:19.8261501Z ##[group]Run cd backend
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8261789Z [36;1mcd backend[0m
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8262153Z [36;1mpytest tests/ -v --cov=app --cov-report=xml --cov-report=term --cov-fail-under=80[0m
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8295650Z shell: /usr/bin/bash -e {0}
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8295898Z env:
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8296085Z   GCP_PROJECT_ID: 
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8296302Z   GCP_REGION: us-central1
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8296536Z   GAR_LOCATION: us-central1
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8296791Z   SERVICE_NAME_PREFIX: vividly-staging
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8297171Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8297618Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8298065Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8298458Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8298845Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8299486Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
Run Tests	Run unit and integration tests	2025-11-01T15:26:19.8299850Z ##[endgroup]
Run Tests	Run unit and integration tests	2025-11-01T15:26:23.2578706Z ============================= test session starts ==============================
Run Tests	Run unit and integration tests	2025-11-01T15:26:23.2580299Z platform linux -- Python 3.11.14, pytest-7.4.3, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.11.14/x64/bin/python
Run Tests	Run unit and integration tests	2025-11-01T15:26:23.2581114Z cachedir: .pytest_cache
Run Tests	Run unit and integration tests	2025-11-01T15:26:23.2581619Z rootdir: /home/runner/work/vividly-mvp/vividly-mvp/backend
Run Tests	Run unit and integration tests	2025-11-01T15:26:23.2582176Z configfile: pytest.ini
Run Tests	Run unit and integration tests	2025-11-01T15:26:23.2582593Z plugins: anyio-3.7.1, asyncio-0.21.1, cov-4.1.0
Run Tests	Run unit and integration tests	2025-11-01T15:26:23.2583071Z asyncio: mode=Mode.AUTO
Run Tests	Run unit and integration tests	2025-11-01T15:26:24.5995601Z collecting ... collected 415 items
Run Tests	Run unit and integration tests	2025-11-01T15:26:24.5996265Z 
Run Tests	Run unit and integration tests	2025-11-01T15:26:25.5229258Z tests/integration/test_admin_endpoints.py::TestAdminUserManagement::test_list_users_success PASSED [  0%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:26.0799878Z tests/integration/test_admin_endpoints.py::TestAdminUserManagement::test_list_users_filter_by_role PASSED [  0%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:26.3752386Z tests/integration/test_admin_endpoints.py::TestAdminUserManagement::test_list_users_forbidden_for_non_admin PASSED [  0%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:26.9355226Z tests/integration/test_admin_endpoints.py::TestAdminUserManagement::test_create_single_user_success PASSED [  0%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:27.4899503Z tests/integration/test_admin_endpoints.py::TestAdminUserManagement::test_create_user_duplicate_email PASSED [  1%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:28.0451597Z tests/integration/test_admin_endpoints.py::TestAdminUserManagement::test_update_user_success PASSED [  1%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:28.6238371Z tests/integration/test_admin_endpoints.py::TestAdminUserManagement::test_delete_user_success PASSED [  1%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:28.9204482Z tests/integration/test_admin_endpoints.py::TestAdminUserManagement::test_delete_own_account_forbidden PASSED [  1%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:29.7388878Z tests/integration/test_admin_endpoints.py::TestBulkUserUpload::test_bulk_upload_partial_success PASSED [  2%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:30.5570514Z tests/integration/test_admin_endpoints.py::TestBulkUserUpload::test_bulk_upload_atomic_rollback PASSED [  2%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:30.8569440Z tests/integration/test_admin_endpoints.py::TestAccountRequests::test_list_pending_requests PASSED [  2%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:31.1580408Z tests/integration/test_admin_endpoints.py::TestAccountRequests::test_get_request_details PASSED [  2%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:31.7228717Z tests/integration/test_admin_endpoints.py::TestAccountRequests::test_approve_request_success PASSED [  3%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:32.0229903Z tests/integration/test_admin_endpoints.py::TestAccountRequests::test_deny_request_success PASSED [  3%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:32.8424675Z tests/integration/test_admin_endpoints.py::TestAdminDashboard::test_get_admin_stats PASSED [  3%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:33.3970694Z tests/integration/test_auth_endpoints.py::TestRegisterEndpoint::test_register_student_success PASSED [  3%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:33.9493640Z tests/integration/test_auth_endpoints.py::TestRegisterEndpoint::test_register_teacher_success PASSED [  4%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:33.9781942Z tests/integration/test_auth_endpoints.py::TestRegisterEndpoint::test_register_invalid_email PASSED [  4%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:34.0089199Z tests/integration/test_auth_endpoints.py::TestRegisterEndpoint::test_register_weak_password PASSED [  4%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:34.4106445Z tests/integration/test_auth_endpoints.py::TestRegisterEndpoint::test_register_duplicate_email PASSED [  4%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:35.2831123Z tests/integration/test_auth_endpoints.py::TestLoginEndpoint::test_login_success PASSED [  5%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:35.8351194Z tests/integration/test_auth_endpoints.py::TestLoginEndpoint::test_login_wrong_password PASSED [  5%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:35.8685226Z tests/integration/test_auth_endpoints.py::TestLoginEndpoint::test_login_nonexistent_user PASSED [  5%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:36.1631779Z tests/integration/test_auth_endpoints.py::TestGetMeEndpoint::test_get_me_success PASSED [  5%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:36.1942270Z tests/integration/test_auth_endpoints.py::TestGetMeEndpoint::test_get_me_no_token PASSED [  6%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:36.2241915Z tests/integration/test_auth_endpoints.py::TestGetMeEndpoint::test_get_me_invalid_token PASSED [  6%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:36.5212186Z tests/integration/test_auth_endpoints.py::TestLogoutEndpoint::test_logout_success PASSED [  6%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:36.8171061Z tests/integration/test_auth_endpoints.py::TestLogoutEndpoint::test_logout_all_devices PASSED [  6%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:36.8447209Z tests/integration/test_auth_endpoints.py::TestLogoutEndpoint::test_logout_no_token PASSED [  6%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:36.8729258Z tests/integration/test_auth_endpoints.py::TestHealthEndpoint::test_health_check PASSED [  7%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:37.1796439Z tests/integration/test_content_endpoints.py::TestContentCacheLookup::test_check_content_exists_cache_hit PASSED [  7%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:37.4809601Z tests/integration/test_content_endpoints.py::TestContentCacheLookup::test_check_content_exists_cache_miss PASSED [  7%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:37.7869607Z tests/integration/test_content_endpoints.py::TestContentCacheLookup::test_get_content_by_cache_key_success PASSED [  7%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:38.0825805Z tests/integration/test_content_endpoints.py::TestContentCacheLookup::test_get_content_not_found PASSED [  8%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:38.3820629Z tests/integration/test_content_endpoints.py::TestContentFeedback::test_submit_feedback_success PASSED [  8%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:38.6807035Z tests/integration/test_content_endpoints.py::TestContentFeedback::test_submit_feedback_invalid_rating PASSED [  8%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:38.9854626Z tests/integration/test_content_endpoints.py::TestContentFeedback::test_get_feedback_summary PASSED [  8%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:39.2870057Z tests/integration/test_content_endpoints.py::TestContentHistory::test_get_student_content_history PASSED [  9%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:39.8388880Z tests/integration/test_content_endpoints.py::TestContentHistory::test_cannot_access_other_student_history PASSED [  9%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:40.1502632Z tests/integration/test_student_endpoints.py::TestGetStudentProfile::test_get_own_profile_success PASSED [  9%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:40.7036318Z tests/integration/test_student_endpoints.py::TestGetStudentProfile::test_student_cannot_access_other_profile PASSED [  9%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:41.2708389Z tests/integration/test_student_endpoints.py::TestGetStudentProfile::test_teacher_can_access_student_profile PASSED [ 10%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:41.5600985Z tests/integration/test_student_endpoints.py::TestGetStudentProfile::test_get_profile_no_auth PASSED [ 10%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:41.8612544Z tests/integration/test_student_endpoints.py::TestUpdateStudentProfile::test_update_own_profile_success PASSED [ 10%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:42.1538852Z tests/integration/test_student_endpoints.py::TestUpdateStudentProfile::test_update_profile_invalid_grade PASSED [ 10%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:42.4490481Z tests/integration/test_student_endpoints.py::TestUpdateStudentProfile::test_student_cannot_update_other_profile PASSED [ 11%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:42.7494312Z tests/integration/test_student_endpoints.py::TestStudentInterests::test_get_interests_success PASSED [ 11%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:43.0593923Z tests/integration/test_student_endpoints.py::TestStudentInterests::test_update_interests_success PASSED [ 11%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:43.3601123Z tests/integration/test_student_endpoints.py::TestStudentInterests::test_update_interests_too_many PASSED [ 11%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:43.6526384Z tests/integration/test_student_endpoints.py::TestStudentInterests::test_update_interests_too_few PASSED [ 12%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:43.9494947Z tests/integration/test_student_endpoints.py::TestStudentInterests::test_update_interests_duplicates PASSED [ 12%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:44.2549279Z tests/integration/test_student_endpoints.py::TestLearningProgress::test_get_progress_success PASSED [ 12%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:44.8288126Z tests/integration/test_student_endpoints.py::TestJoinClass::test_join_class_success PASSED [ 12%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:45.1295588Z tests/integration/test_student_endpoints.py::TestJoinClass::test_join_class_invalid_code PASSED [ 13%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:45.6965671Z tests/integration/test_student_endpoints.py::TestJoinClass::test_join_class_already_enrolled PASSED [ 13%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:46.2595738Z tests/integration/test_student_endpoints.py::TestJoinClass::test_join_archived_class PASSED [ 13%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:46.5598895Z tests/integration/test_teacher_endpoints.py::TestCreateClass::test_create_class_success PASSED [ 13%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:46.8500005Z tests/integration/test_teacher_endpoints.py::TestCreateClass::test_create_class_student_forbidden PASSED [ 13%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:47.1438814Z tests/integration/test_teacher_endpoints.py::TestCreateClass::test_create_class_invalid_grade_levels PASSED [ 14%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:47.4414412Z tests/integration/test_teacher_endpoints.py::TestGetTeacherClasses::test_get_own_classes_success PASSED [ 14%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:47.7368643Z tests/integration/test_teacher_endpoints.py::TestGetTeacherClasses::test_get_classes_include_archived PASSED [ 14%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:48.2861955Z tests/integration/test_teacher_endpoints.py::TestGetTeacherClasses::test_teacher_cannot_access_other_classes PASSED [ 14%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:48.5850249Z tests/integration/test_teacher_endpoints.py::TestGetClassDetails::test_get_class_details_success PASSED [ 15%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:48.8773552Z tests/integration/test_teacher_endpoints.py::TestGetClassDetails::test_get_nonexistent_class PASSED [ 15%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:49.1765056Z tests/integration/test_teacher_endpoints.py::TestUpdateClass::test_update_class_success PASSED [ 15%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:49.4747451Z tests/integration/test_teacher_endpoints.py::TestUpdateClass::test_update_class_invalid_grades PASSED [ 15%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:49.8685715Z tests/integration/test_teacher_endpoints.py::TestArchiveClass::test_archive_class_success PASSED [ 16%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:50.4362763Z tests/integration/test_teacher_endpoints.py::TestGetClassRoster::test_get_roster_success PASSED [ 16%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:50.7348137Z tests/integration/test_teacher_endpoints.py::TestGetClassRoster::test_get_roster_empty_class PASSED [ 16%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:51.2990816Z tests/integration/test_teacher_endpoints.py::TestRemoveStudentFromClass::test_remove_student_success PASSED [ 16%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:51.8584968Z tests/integration/test_teacher_endpoints.py::TestRemoveStudentFromClass::test_remove_unenrolled_student PASSED [ 17%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:52.1584555Z tests/integration/test_teacher_endpoints.py::TestStudentAccountRequests::test_create_single_request_success PASSED [ 17%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:52.4600276Z tests/integration/test_teacher_endpoints.py::TestStudentAccountRequests::test_create_bulk_requests_success PASSED [ 17%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:53.0126113Z tests/integration/test_teacher_endpoints.py::TestStudentAccountRequests::test_create_request_duplicate_email PASSED [ 17%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:53.3057170Z tests/integration/test_teacher_endpoints.py::TestStudentAccountRequests::test_create_bulk_too_many PASSED [ 18%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:53.5979939Z tests/integration/test_teacher_endpoints.py::TestGetTeacherRequests::test_get_requests_success PASSED [ 18%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:53.8906515Z tests/integration/test_teacher_endpoints.py::TestGetTeacherRequests::test_get_requests_filtered_by_status PASSED [ 18%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:54.1988858Z tests/integration/test_teacher_endpoints.py::TestTeacherDashboard::test_get_dashboard_success PASSED [ 18%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:54.7488753Z tests/integration/test_teacher_endpoints.py::TestTeacherDashboard::test_teacher_cannot_access_other_dashboard PASSED [ 19%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:55.0473471Z tests/integration/test_topics_endpoints.py::TestTopicsDiscovery::test_list_topics_success PASSED [ 19%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:55.3434025Z tests/integration/test_topics_endpoints.py::TestTopicsDiscovery::test_list_topics_filter_by_subject PASSED [ 19%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:55.6394686Z tests/integration/test_topics_endpoints.py::TestTopicsDiscovery::test_list_topics_filter_by_grade PASSED [ 19%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:55.9447723Z tests/integration/test_topics_endpoints.py::TestTopicsDiscovery::test_list_topics_pagination PASSED [ 20%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:56.2415637Z tests/integration/test_topics_endpoints.py::TestTopicsDiscovery::test_get_topic_details_success PASSED [ 20%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:56.5345180Z tests/integration/test_topics_endpoints.py::TestTopicsDiscovery::test_get_topic_not_found PASSED [ 20%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:56.8372822Z tests/integration/test_topics_endpoints.py::TestTopicsDiscovery::test_get_topic_prerequisites PASSED [ 20%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:57.1344414Z tests/integration/test_topics_endpoints.py::TestTopicsSearch::test_search_topics_success PASSED [ 20%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:57.4299855Z tests/integration/test_topics_endpoints.py::TestTopicsSearch::test_search_topics_relevance_scoring PASSED [ 21%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:57.7205644Z tests/integration/test_topics_endpoints.py::TestTopicsSearch::test_search_topics_min_query_length PASSED [ 21%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:58.0154791Z tests/integration/test_topics_endpoints.py::TestTopicsSearch::test_search_topics_limit PASSED [ 21%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:58.3137876Z tests/integration/test_topics_endpoints.py::TestInterestsCatalog::test_list_interests_success PASSED [ 21%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:58.6103371Z tests/integration/test_topics_endpoints.py::TestInterestsCatalog::test_list_interests_includes_popularity PASSED [ 22%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:58.9035086Z tests/integration/test_topics_endpoints.py::TestInterestsCatalog::test_list_interest_categories PASSED [ 22%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.1982789Z tests/integration/test_topics_endpoints.py::TestInterestsCatalog::test_get_interest_details PASSED [ 22%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.4938682Z tests/integration/test_topics_endpoints.py::TestInterestsCatalog::test_get_interest_not_found PASSED [ 22%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.5059181Z tests/security/test_api_security.py::TestMassAssignment::test_cannot_assign_admin_role_during_registration PASSED [ 23%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.5946671Z tests/security/test_api_security.py::TestMassAssignment::test_cannot_modify_readonly_fields FAILED [ 23%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.6254948Z tests/security/test_api_security.py::TestExcessiveDataExposure::test_passwords_not_exposed_in_responses FAILED [ 23%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.6421882Z tests/security/test_api_security.py::TestExcessiveDataExposure::test_internal_fields_not_exposed FAILED [ 23%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.6586962Z tests/security/test_api_security.py::TestBrokenObjectLevelAuthorization::test_cannot_access_other_users_profile FAILED [ 24%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.6754304Z tests/security/test_api_security.py::TestBrokenObjectLevelAuthorization::test_cannot_modify_other_users_data FAILED [ 24%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.6920388Z tests/security/test_api_security.py::TestBrokenObjectLevelAuthorization::test_teacher_cannot_access_other_teachers_classes FAILED [ 24%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.7052089Z tests/security/test_api_security.py::TestInjectionAttacks::test_nosql_injection_prevention PASSED [ 24%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.7353191Z tests/security/test_api_security.py::TestInjectionAttacks::test_command_injection_prevention PASSED [ 25%]
Run Tests	Run unit and integration tests	2025-11-01T15:26:59.7441066Z tests/security/test_api_security.py::TestInjectionAttacks::test_ldap_injection_prevention PASSED [ 25%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3067342Z tests/security/test_api_security.py::TestRateLimiting::test_api_rate_limiting_enforced FAILED [ 25%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3173234Z tests/security/test_api_security.py::TestRateLimiting::test_authenticated_endpoints_have_rate_limits FAILED [ 25%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3258245Z tests/security/test_api_security.py::TestBusinessLogicSecurity::test_cannot_enroll_in_negative_grade PASSED [ 26%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3369756Z tests/security/test_api_security.py::TestBusinessLogicSecurity::test_cannot_create_class_with_invalid_data FAILED [ 26%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3382061Z tests/security/test_api_security.py::TestBusinessLogicSecurity::test_race_condition_protection PASSED [ 26%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3429577Z tests/security/test_api_security.py::TestDataLeakage::test_error_messages_dont_leak_sensitive_info PASSED [ 26%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3499602Z tests/security/test_api_security.py::TestDataLeakage::test_timing_attacks_prevention PASSED [ 26%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3511651Z tests/security/test_api_security.py::TestFileUploadSecurity::test_file_type_validation PASSED [ 27%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3523246Z tests/security/test_api_security.py::TestFileUploadSecurity::test_file_size_limits PASSED [ 27%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3535724Z tests/security/test_api_security.py::TestFileUploadSecurity::test_malicious_file_detection PASSED [ 27%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3574991Z tests/security/test_authentication_security.py::TestBruteForceProtection::test_rate_limiting_login_attempts PASSED [ 27%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3757224Z tests/security/test_authentication_security.py::TestBruteForceProtection::test_account_lockout_after_failed_attempts PASSED [ 28%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.3842554Z tests/security/test_authentication_security.py::TestPasswordSecurity::test_password_minimum_length PASSED [ 28%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4020718Z tests/security/test_authentication_security.py::TestPasswordSecurity::test_password_complexity_requirements FAILED [ 28%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4107383Z tests/security/test_authentication_security.py::TestPasswordSecurity::test_common_passwords_rejected PASSED [ 28%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4188369Z tests/security/test_authentication_security.py::TestJWTSecurity::test_jwt_token_expiration PASSED [ 29%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4268040Z tests/security/test_authentication_security.py::TestJWTSecurity::test_jwt_token_tampering PASSED [ 29%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4280370Z tests/security/test_authentication_security.py::TestJWTSecurity::test_jwt_missing_claims PASSED [ 29%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4385942Z tests/security/test_authentication_security.py::TestSessionManagement::test_logout_invalidates_token FAILED [ 29%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4398265Z tests/security/test_authentication_security.py::TestSessionManagement::test_concurrent_sessions_limit PASSED [ 30%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4410549Z tests/security/test_authentication_security.py::TestSessionManagement::test_session_fixation_prevention PASSED [ 30%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4515981Z tests/security/test_authentication_security.py::TestAuthorizationSecurity::test_student_cannot_access_teacher_endpoints FAILED [ 30%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4620167Z tests/security/test_authentication_security.py::TestAuthorizationSecurity::test_teacher_cannot_access_admin_endpoints FAILED [ 30%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4722088Z tests/security/test_authentication_security.py::TestAuthorizationSecurity::test_horizontal_privilege_escalation_prevention FAILED [ 31%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4833308Z tests/security/test_authentication_security.py::TestInputValidationSecurity::test_sql_injection_prevention_in_login PASSED [ 31%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.4918177Z tests/security/test_authentication_security.py::TestInputValidationSecurity::test_xss_prevention_in_user_input PASSED [ 31%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5102231Z tests/security/test_authentication_security.py::TestInputValidationSecurity::test_path_traversal_prevention PASSED [ 31%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5210967Z tests/security/test_authentication_security.py::TestCORSSecurity::test_cors_headers_present FAILED [ 32%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5248316Z tests/security/test_authentication_security.py::TestCORSSecurity::test_cors_credentials_properly_configured PASSED [ 32%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5383576Z tests/security/test_authentication_security.py::TestCSRFProtection::test_state_changing_requests_require_authentication FAILED [ 32%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5395970Z tests/security/test_authentication_security.py::TestCSRFProtection::test_csrf_token_validation PASSED [ 32%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5504584Z tests/security/test_authentication_security.py::TestSecurityHeaders::test_security_headers_present FAILED [ 33%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5520306Z tests/unit/test_admin_service.py::TestHelperFunctions::test_generate_user_id PASSED [ 33%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5536274Z tests/unit/test_admin_service.py::TestHelperFunctions::test_generate_user_id_uniqueness PASSED [ 33%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5574213Z tests/unit/test_admin_service.py::TestListUsers::test_list_users_no_filters PASSED [ 33%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5607403Z tests/unit/test_admin_service.py::TestListUsers::test_list_users_with_role_filter PASSED [ 33%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5643573Z tests/unit/test_admin_service.py::TestListUsers::test_list_users_with_search PASSED [ 34%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.5710594Z tests/unit/test_admin_service.py::TestListUsers::test_list_users_with_pagination PASSED [ 34%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.8308770Z tests/unit/test_admin_service.py::TestCreateUser::test_create_user_success PASSED [ 34%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:00.8337643Z tests/unit/test_admin_service.py::TestCreateUser::test_create_user_duplicate_email PASSED [ 34%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.0937380Z tests/unit/test_admin_service.py::TestCreateUser::test_create_user_with_school_id PASSED [ 35%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3536416Z tests/unit/test_admin_service.py::TestCreateUser::test_create_user_teacher_role PASSED [ 35%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3577035Z tests/unit/test_admin_service.py::TestUpdateUser::test_update_user_success PASSED [ 35%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3600454Z tests/unit/test_admin_service.py::TestUpdateUser::test_update_user_not_found PASSED [ 35%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3631039Z tests/unit/test_admin_service.py::TestUpdateUser::test_update_user_role PASSED [ 36%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3661377Z tests/unit/test_admin_service.py::TestUpdateUser::test_update_user_multiple_fields PASSED [ 36%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3694480Z tests/unit/test_admin_service.py::TestDeleteUser::test_delete_user_success PASSED [ 36%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3708394Z tests/unit/test_admin_service.py::TestDeleteUser::test_delete_user_own_account PASSED [ 36%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3731310Z tests/unit/test_admin_service.py::TestDeleteUser::test_delete_user_not_found PASSED [ 37%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3763075Z tests/unit/test_admin_service.py::TestDeleteUser::test_delete_user_revokes_sessions PASSED [ 37%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3806328Z tests/unit/test_admin_service.py::TestBulkUploadUsers::test_bulk_upload_success PASSED [ 37%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3824193Z tests/unit/test_admin_service.py::TestBulkUploadUsers::test_bulk_upload_missing_headers PASSED [ 37%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3851029Z tests/unit/test_admin_service.py::TestBulkUploadUsers::test_bulk_upload_duplicate_email PASSED [ 38%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3877692Z tests/unit/test_admin_service.py::TestBulkUploadUsers::test_bulk_upload_missing_fields PASSED [ 38%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3904256Z tests/unit/test_admin_service.py::TestBulkUploadUsers::test_bulk_upload_invalid_email PASSED [ 38%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3936249Z tests/unit/test_admin_service.py::TestBulkUploadUsers::test_bulk_upload_atomic_mode_failure PASSED [ 38%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.3968175Z tests/unit/test_admin_service.py::TestBulkUploadUsers::test_bulk_upload_partial_success PASSED [ 39%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4004867Z tests/unit/test_admin_service.py::TestAccountRequests::test_list_pending_requests PASSED [ 39%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4039668Z tests/unit/test_admin_service.py::TestAccountRequests::test_list_pending_requests_with_school_filter PASSED [ 39%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4067407Z tests/unit/test_admin_service.py::TestAccountRequests::test_get_request_details_success PASSED [ 39%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4090380Z tests/unit/test_admin_service.py::TestAccountRequests::test_get_request_details_not_found PASSED [ 40%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4130816Z tests/unit/test_admin_service.py::TestApproveRequest::test_approve_request_success PASSED [ 40%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4153791Z tests/unit/test_admin_service.py::TestApproveRequest::test_approve_request_not_found PASSED [ 40%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4178152Z tests/unit/test_admin_service.py::TestApproveRequest::test_approve_request_already_processed PASSED [ 40%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4205459Z tests/unit/test_admin_service.py::TestApproveRequest::test_approve_request_duplicate_email PASSED [ 40%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4234903Z tests/unit/test_admin_service.py::TestDenyRequest::test_deny_request_success PASSED [ 41%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4257373Z tests/unit/test_admin_service.py::TestDenyRequest::test_deny_request_not_found PASSED [ 41%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4281496Z tests/unit/test_admin_service.py::TestDenyRequest::test_deny_request_already_processed PASSED [ 41%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4360084Z tests/unit/test_admin_service.py::TestDashboardStats::test_get_dashboard_stats PASSED [ 41%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:01.4395114Z tests/unit/test_admin_service.py::TestDashboardStats::test_get_dashboard_stats_empty PASSED [ 42%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.3993138Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success PASSED [ 42%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4020628Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_out_of_scope PASSED [ 42%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4045402Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_clarification_needed PASSED [ 42%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4122108Z tests/unit/test_ai_services.py::TestRAGService::test_retrieve_content_success PASSED [ 43%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4145064Z tests/unit/test_ai_services.py::TestRAGService::test_retrieve_content_with_interest PASSED [ 43%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4171044Z tests/unit/test_ai_services.py::TestRAGService::test_generate_embeddings PASSED [ 43%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4194862Z tests/unit/test_ai_services.py::TestScriptGenerationService::test_generate_script_success PASSED [ 43%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4217770Z tests/unit/test_ai_services.py::TestScriptGenerationService::test_script_structure PASSED [ 44%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4242956Z tests/unit/test_ai_services.py::TestTTSService::test_generate_audio_success PASSED [ 44%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4265614Z tests/unit/test_ai_services.py::TestTTSService::test_audio_voice_types PASSED [ 44%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4280999Z tests/unit/test_ai_services.py::TestTTSService::test_narration_text_building PASSED [ 44%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4937752Z tests/unit/test_ai_services.py::TestVideoService::test_generate_video_success PASSED [ 45%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4952396Z tests/unit/test_ai_services.py::TestVideoService::test_video_config PASSED [ 45%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.4965878Z tests/unit/test_ai_services.py::TestVideoService::test_visual_styles PASSED [ 45%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5018349Z tests/unit/test_ai_services.py::TestEmbeddingsService::test_generate_single_embedding PASSED [ 45%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5087580Z tests/unit/test_ai_services.py::TestEmbeddingsService::test_generate_embeddings_batch PASSED [ 46%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5135416Z tests/unit/test_ai_services.py::TestEmbeddingsService::test_query_embedding PASSED [ 46%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5173244Z tests/unit/test_ai_services.py::TestEmbeddingsService::test_embedding_validation PASSED [ 46%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5358310Z tests/unit/test_ai_services.py::TestContentIngestionService::test_ingest_content_success PASSED [ 46%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5386634Z tests/unit/test_ai_services.py::TestContentIngestionService::test_chunk_text PASSED [ 46%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5399226Z tests/unit/test_ai_services.py::TestContentIngestionService::test_keyword_extraction PASSED [ 47%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5411456Z tests/unit/test_ai_services.py::TestContentIngestionService::test_concept_extraction PASSED [ 47%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5495255Z tests/unit/test_ai_services.py::TestContentGenerationService::test_generate_content_from_query_success PASSED [ 47%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5520924Z tests/unit/test_ai_services.py::TestContentGenerationService::test_pipeline_clarification_needed PASSED [ 47%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5545901Z tests/unit/test_ai_services.py::TestContentGenerationService::test_pipeline_out_of_scope PASSED [ 48%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5560551Z tests/unit/test_ai_services.py::TestContentGenerationService::test_subject_inference PASSED [ 48%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5589523Z tests/unit/test_ai_services.py::TestContentGenerationService::test_generate_content_from_topic PASSED [ 48%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5677880Z tests/unit/test_ai_services.py::TestContentGenerationPipeline::test_full_pipeline_mock_mode PASSED [ 48%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:04.5704134Z tests/unit/test_ai_services.py::TestContentGenerationPipeline::test_pipeline_error_handling PASSED [ 49%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:05.1162353Z tests/unit/test_auth_service.py::TestUserRegistration::test_register_student_success PASSED [ 49%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:05.4009926Z tests/unit/test_auth_service.py::TestUserRegistration::test_register_teacher_success PASSED [ 49%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:05.6871068Z tests/unit/test_auth_service.py::TestUserRegistration::test_register_duplicate_email PASSED [ 49%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:06.2297109Z tests/unit/test_auth_service.py::TestUserAuthentication::test_authenticate_success PASSED [ 50%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:06.7718805Z tests/unit/test_auth_service.py::TestUserAuthentication::test_authenticate_wrong_password PASSED [ 50%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:06.7942051Z tests/unit/test_auth_service.py::TestUserAuthentication::test_authenticate_nonexistent_user PASSED [ 50%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:07.3318861Z tests/unit/test_auth_service.py::TestUserAuthentication::test_authenticate_suspended_user PASSED [ 50%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:07.8720156Z tests/unit/test_auth_service.py::TestTokenManagement::test_create_tokens_success PASSED [ 51%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:08.4150110Z tests/unit/test_auth_service.py::TestTokenManagement::test_session_created_on_login PASSED [ 51%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:08.9607089Z tests/unit/test_auth_service.py::TestLogout::test_revoke_single_session PASSED [ 51%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:09.7689841Z tests/unit/test_auth_service.py::TestLogout::test_revoke_all_sessions PASSED [ 51%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:10.0555718Z tests/unit/test_auth_service.py::TestLogout::test_revoke_no_active_sessions PASSED [ 52%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:10.0568125Z tests/unit/test_auth_service.py::TestHelperFunctions::test_generate_user_id PASSED [ 52%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:10.0580805Z tests/unit/test_auth_service.py::TestHelperFunctions::test_generate_session_id PASSED [ 52%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:10.0596445Z tests/unit/test_auth_service.py::TestHelperFunctions::test_user_id_uniqueness PASSED [ 52%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:10.0611567Z tests/unit/test_auth_service.py::TestHelperFunctions::test_session_id_uniqueness PASSED [ 53%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:10.0835017Z tests/unit/test_auth_service.py::TestEdgeCases::test_authenticate_empty_email PASSED [ 53%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:10.6232824Z tests/unit/test_auth_service.py::TestEdgeCases::test_authenticate_empty_password PASSED [ 53%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1666452Z tests/unit/test_auth_service.py::TestEdgeCases::test_create_tokens_without_optional_params PASSED [ 53%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1686937Z tests/unit/test_cache_service.py::TestCacheServiceInitialization::test_init_with_default_settings PASSED [ 53%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1705706Z tests/unit/test_cache_service.py::TestCacheServiceInitialization::test_init_with_custom_redis_url PASSED [ 54%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1727264Z tests/unit/test_cache_service.py::TestCacheServiceInitialization::test_init_with_gcs_client PASSED [ 54%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1748628Z tests/unit/test_cache_service.py::TestGenerateCacheKey::test_generate_cache_key_deterministic PASSED [ 54%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1768875Z tests/unit/test_cache_service.py::TestGenerateCacheKey::test_generate_cache_key_normalization PASSED [ 54%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1790690Z tests/unit/test_cache_service.py::TestGenerateCacheKey::test_generate_cache_key_different_inputs PASSED [ 55%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1824405Z tests/unit/test_cache_service.py::TestCheckContentCache::test_check_content_cache_redis_hit PASSED [ 55%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1871450Z tests/unit/test_cache_service.py::TestCheckContentCache::test_check_content_cache_gcs_hit PASSED [ 55%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1902032Z tests/unit/test_cache_service.py::TestCheckContentCache::test_check_content_cache_miss PASSED [ 55%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1947281Z tests/unit/test_cache_service.py::TestStoreContentCache::test_store_content_cache_success PASSED [ 56%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.1978131Z tests/unit/test_cache_service.py::TestStoreContentCache::test_store_content_cache_redis_only PASSED [ 56%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2008833Z tests/unit/test_cache_service.py::TestInvalidateContentCache::test_invalidate_redis_only PASSED [ 56%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2054620Z tests/unit/test_cache_service.py::TestInvalidateContentCache::test_invalidate_redis_and_gcs PASSED [ 56%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2073217Z tests/unit/test_cache_service.py::TestCacheStats::test_get_cache_stats_with_hits PASSED [ 57%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2126327Z tests/unit/test_cache_service.py::TestCacheStats::test_get_cache_stats_empty PASSED [ 57%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2144642Z tests/unit/test_cache_service.py::TestCacheStats::test_reset_cache_stats PASSED [ 57%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2164149Z tests/unit/test_cache_service.py::TestGeneralCacheMethods::test_get_value PASSED [ 57%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2183047Z tests/unit/test_cache_service.py::TestGeneralCacheMethods::test_get_value_not_found PASSED [ 58%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2202325Z tests/unit/test_cache_service.py::TestGeneralCacheMethods::test_set_value_with_ttl PASSED [ 58%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2222608Z tests/unit/test_cache_service.py::TestGeneralCacheMethods::test_set_value_without_ttl PASSED [ 58%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2241697Z tests/unit/test_cache_service.py::TestGeneralCacheMethods::test_delete_key PASSED [ 58%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2262535Z tests/unit/test_cache_service.py::TestGeneralCacheMethods::test_delete_pattern PASSED [ 59%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2281492Z tests/unit/test_cache_service.py::TestGeneralCacheMethods::test_exists_key PASSED [ 59%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2301447Z tests/unit/test_cache_service.py::TestGeneralCacheMethods::test_increment_counter PASSED [ 59%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2321728Z tests/unit/test_cache_service.py::TestGeneralCacheMethods::test_get_ttl PASSED [ 59%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2340995Z tests/unit/test_cache_service.py::TestUserCache::test_get_user PASSED    [ 60%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2360135Z tests/unit/test_cache_service.py::TestUserCache::test_set_user PASSED    [ 60%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2379334Z tests/unit/test_cache_service.py::TestUserCache::test_invalidate_user PASSED [ 60%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2399332Z tests/unit/test_cache_service.py::TestContentCacheHelper::test_get_content PASSED [ 60%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2422412Z tests/unit/test_cache_service.py::TestContentCacheHelper::test_set_content PASSED [ 60%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2445244Z tests/unit/test_cache_service.py::TestContentCacheHelper::test_invalidate_student_content PASSED [ 61%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2464293Z tests/unit/test_cache_service.py::TestSessionCache::test_get_session PASSED [ 61%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2483405Z tests/unit/test_cache_service.py::TestSessionCache::test_set_session PASSED [ 61%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2502776Z tests/unit/test_cache_service.py::TestSessionCache::test_delete_session PASSED [ 61%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2525852Z tests/unit/test_cache_service.py::TestSessionCache::test_delete_user_sessions PASSED [ 62%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2538309Z tests/unit/test_content_delivery_service.py::TestContentDeliveryServiceInitialization::test_init_with_default_settings PASSED [ 62%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2552495Z tests/unit/test_content_delivery_service.py::TestContentDeliveryServiceInitialization::test_init_with_custom_client PASSED [ 62%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2579373Z tests/unit/test_content_delivery_service.py::TestContentDeliveryServiceInitialization::test_init_with_env_vars PASSED [ 62%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2604995Z tests/unit/test_content_delivery_service.py::TestGenerateSignedURL::test_generate_signed_url_video PASSED [ 63%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2626877Z tests/unit/test_content_delivery_service.py::TestGenerateSignedURL::test_generate_signed_url_audio PASSED [ 63%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2648131Z tests/unit/test_content_delivery_service.py::TestGenerateSignedURL::test_generate_signed_url_script PASSED [ 63%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2669743Z tests/unit/test_content_delivery_service.py::TestGenerateSignedURL::test_generate_signed_url_thumbnail PASSED [ 63%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2692224Z tests/unit/test_content_delivery_service.py::TestGenerateSignedURL::test_generate_signed_url_invalid_type PASSED [ 64%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2713835Z tests/unit/test_content_delivery_service.py::TestGenerateSignedURL::test_generate_signed_url_custom_ttl PASSED [ 64%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2737409Z tests/unit/test_content_delivery_service.py::TestGenerateSignedURL::test_generate_signed_url_updates_stats PASSED [ 64%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2760833Z tests/unit/test_content_delivery_service.py::TestBatchURLGeneration::test_generate_batch_urls_success PASSED [ 64%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2780859Z tests/unit/test_content_delivery_service.py::TestBatchURLGeneration::test_generate_batch_urls_empty PASSED [ 65%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2804198Z tests/unit/test_content_delivery_service.py::TestBatchURLGeneration::test_generate_batch_urls_with_errors PASSED [ 65%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2826837Z tests/unit/test_content_delivery_service.py::TestBatchURLGeneration::test_generate_batch_urls_minimum_ttl PASSED [ 65%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2838689Z tests/unit/test_content_delivery_service.py::TestBuildGCSPath::test_build_gcs_path_video PASSED [ 65%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2850838Z tests/unit/test_content_delivery_service.py::TestBuildGCSPath::test_build_gcs_path_audio PASSED [ 66%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2862894Z tests/unit/test_content_delivery_service.py::TestBuildGCSPath::test_build_gcs_path_script PASSED [ 66%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2874819Z tests/unit/test_content_delivery_service.py::TestBuildGCSPath::test_build_gcs_path_thumbnail PASSED [ 66%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2888595Z tests/unit/test_content_delivery_service.py::TestBuildGCSPath::test_build_gcs_path_invalid_type PASSED [ 66%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2901044Z tests/unit/test_content_delivery_service.py::TestBuildGCSPath::test_build_gcs_path_video_qualities PASSED [ 66%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2922695Z tests/unit/test_content_delivery_service.py::TestGenerateGCSSignedURL::test_generate_gcs_signed_url_without_client PASSED [ 67%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2956677Z tests/unit/test_content_delivery_service.py::TestGenerateGCSSignedURL::test_generate_gcs_signed_url_with_client PASSED [ 67%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.2990364Z tests/unit/test_content_delivery_service.py::TestGenerateGCSSignedURL::test_generate_gcs_signed_url_blob_not_found PASSED [ 67%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3010474Z tests/unit/test_content_delivery_service.py::TestGetFileSize::test_get_file_size_without_client PASSED [ 67%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3044228Z tests/unit/test_content_delivery_service.py::TestGetFileSize::test_get_file_size_with_client PASSED [ 68%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3074495Z tests/unit/test_content_delivery_service.py::TestGetFileSize::test_get_file_size_blob_not_exists PASSED [ 68%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3094360Z tests/unit/test_content_delivery_service.py::TestGetDuration::test_get_duration_returns_none PASSED [ 68%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3106462Z tests/unit/test_content_delivery_service.py::TestAccessStats::test_get_access_stats PASSED [ 68%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3118572Z tests/unit/test_content_delivery_service.py::TestAccessStats::test_get_access_stats_returns_copy PASSED [ 69%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3130979Z tests/unit/test_content_delivery_service.py::TestAccessStats::test_reset_access_stats PASSED [ 69%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3158704Z tests/unit/test_content_delivery_service.py::TestAccessStats::test_access_stats_increment_correctly PASSED [ 69%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3195029Z tests/unit/test_content_tracking_service.py::TestTrackView::test_track_view_success PASSED [ 69%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3220490Z tests/unit/test_content_tracking_service.py::TestTrackView::test_track_view_content_not_found PASSED [ 70%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3255850Z tests/unit/test_content_tracking_service.py::TestTrackView::test_track_view_initializes_none_views PASSED [ 70%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3276519Z tests/unit/test_content_tracking_service.py::TestTrackView::test_track_view_database_error PASSED [ 70%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3317708Z tests/unit/test_content_tracking_service.py::TestTrackProgress::test_track_progress_existing_record PASSED [ 70%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3474919Z tests/unit/test_content_tracking_service.py::TestTrackProgress::test_track_progress_new_record FAILED [ 71%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3498292Z tests/unit/test_content_tracking_service.py::TestTrackProgress::test_track_progress_content_not_found PASSED [ 71%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3557497Z tests/unit/test_content_tracking_service.py::TestTrackCompletion::test_track_completion_success PASSED [ 71%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3582382Z tests/unit/test_content_tracking_service.py::TestTrackCompletion::test_track_completion_content_not_found PASSED [ 71%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3720404Z tests/unit/test_content_tracking_service.py::TestTrackCompletion::test_track_completion_no_progress_record FAILED [ 72%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3860542Z tests/unit/test_content_tracking_service.py::TestGetContentAnalytics::test_get_content_analytics_success FAILED [ 72%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.3882899Z tests/unit/test_content_tracking_service.py::TestGetContentAnalytics::test_get_content_analytics_content_not_found PASSED [ 72%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4017992Z tests/unit/test_content_tracking_service.py::TestGetContentAnalytics::test_get_content_analytics_zero_views FAILED [ 72%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4044490Z tests/unit/test_content_tracking_service.py::TestCheckAchievements::test_check_achievements_basic PASSED [ 73%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4069802Z tests/unit/test_content_tracking_service.py::TestCheckAchievements::test_check_achievements_first_completion PASSED [ 73%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4108568Z tests/unit/test_content_tracking_service.py::TestCalculateStreak::test_calculate_streak_no_progress PASSED [ 73%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4146510Z tests/unit/test_content_tracking_service.py::TestCalculateStreak::test_calculate_streak_with_consecutive_days PASSED [ 73%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4188178Z tests/unit/test_content_tracking_service.py::TestCalculateStreak::test_calculate_streak_broken_streak PASSED [ 73%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4220208Z tests/unit/test_content_tracking_service.py::TestEdgeCases::test_track_progress_with_different_speeds PASSED [ 74%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4253084Z tests/unit/test_content_tracking_service.py::TestEdgeCases::test_track_progress_near_end PASSED [ 74%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4302266Z tests/unit/test_content_tracking_service.py::TestEdgeCases::test_track_completion_with_low_completion_rate PASSED [ 74%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4353448Z tests/unit/test_content_tracking_service.py::TestEdgeCases::test_multiple_completions_same_content PASSED [ 74%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4365688Z tests/unit/test_email_service.py::TestEmailServiceInitialization::test_init_with_default_settings PASSED [ 75%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4379474Z tests/unit/test_email_service.py::TestEmailServiceInitialization::test_init_with_custom_client PASSED [ 75%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4405856Z tests/unit/test_email_service.py::TestEmailServiceInitialization::test_init_with_env_vars PASSED [ 75%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4458618Z tests/unit/test_email_service.py::TestQueueEmail::test_queue_welcome_student_email PASSED [ 75%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4486000Z tests/unit/test_email_service.py::TestQueueEmail::test_queue_welcome_teacher_email PASSED [ 76%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4512523Z tests/unit/test_email_service.py::TestQueueEmail::test_queue_password_reset_email PASSED [ 76%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4546448Z tests/unit/test_email_service.py::TestQueueEmail::test_queue_content_ready_email PASSED [ 76%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4560384Z tests/unit/test_email_service.py::TestQueueEmail::test_queue_with_invalid_template PASSED [ 76%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4586804Z tests/unit/test_email_service.py::TestQueueEmail::test_queue_with_priority PASSED [ 77%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4735724Z tests/unit/test_email_service.py::TestQueueEmail::test_rate_limiting PASSED [ 77%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4817287Z tests/unit/test_email_service.py::TestBatchSending::test_send_batch_all_successful PASSED [ 77%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4859503Z tests/unit/test_email_service.py::TestBatchSending::test_send_batch_with_failures PASSED [ 77%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4875038Z tests/unit/test_email_service.py::TestBatchSending::test_send_empty_batch PASSED [ 78%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4916429Z tests/unit/test_email_service.py::TestBatchSending::test_send_batch_with_priorities PASSED [ 78%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4928615Z tests/unit/test_email_service.py::TestEmailStatus::test_get_status PASSED [ 78%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4953464Z tests/unit/test_email_service.py::TestTemplateRendering::test_render_welcome_student_template PASSED [ 78%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.4977300Z tests/unit/test_email_service.py::TestTemplateRendering::test_render_password_reset_template PASSED [ 79%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5008495Z tests/unit/test_email_service.py::TestTemplateRendering::test_render_content_ready_template PASSED [ 79%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5037506Z tests/unit/test_email_service.py::TestTemplateRendering::test_render_account_approved_template PASSED [ 79%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5052066Z tests/unit/test_email_service.py::TestTemplateRendering::test_render_unknown_template PASSED [ 79%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5064253Z tests/unit/test_email_service.py::TestRateLimiting::test_rate_limit_check_within_limit PASSED [ 80%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5076649Z tests/unit/test_email_service.py::TestRateLimiting::test_rate_limit_check_at_limit PASSED [ 80%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5089207Z tests/unit/test_email_service.py::TestRateLimiting::test_rate_limit_different_emails PASSED [ 80%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5101344Z tests/unit/test_email_service.py::TestRateLimiting::test_rate_limit_hour_key_format PASSED [ 80%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5127067Z tests/unit/test_email_service.py::TestEmailSending::test_send_email_without_client PASSED [ 80%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5153353Z tests/unit/test_email_service.py::TestEmailSending::test_send_email_with_mock_client PASSED [ 81%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5181005Z tests/unit/test_email_service.py::TestEmailSending::test_send_email_with_invalid_template_data PASSED [ 81%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5193350Z tests/unit/test_email_service.py::TestAllTemplates::test_all_templates_have_subject_and_html PASSED [ 81%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5205014Z tests/unit/test_email_service.py::TestAllTemplates::test_welcome_admin_template_exists PASSED [ 81%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5216865Z tests/unit/test_email_service.py::TestAllTemplates::test_account_denied_template_exists PASSED [ 82%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5243607Z tests/unit/test_email_service.py::TestEdgeCases::test_queue_email_with_empty_data PASSED [ 82%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.5270343Z tests/unit/test_email_service.py::TestEdgeCases::test_queue_email_with_special_characters PASSED [ 82%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6639853Z tests/unit/test_email_service.py::TestEdgeCases::test_notification_id_uniqueness PASSED [ 82%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6693874Z tests/unit/test_email_service.py::TestEdgeCases::test_batch_id_uniqueness PASSED [ 83%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6811040Z tests/unit/test_nlu_service.py::TestNLUServiceInitialization::test_init_without_vertex_ai FAILED [ 83%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6826009Z tests/unit/test_nlu_service.py::TestNLUServiceInitialization::test_init_with_custom_project PASSED [ 83%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6855026Z tests/unit/test_nlu_service.py::TestNLUServiceInitialization::test_init_with_env_project PASSED [ 83%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6880484Z tests/unit/test_nlu_service.py::TestExtractTopic::test_extract_topic_query_too_short PASSED [ 84%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6903479Z tests/unit/test_nlu_service.py::TestExtractTopic::test_extract_topic_invalid_grade PASSED [ 84%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6926247Z tests/unit/test_nlu_service.py::TestExtractTopic::test_extract_topic_newton_third_law PASSED [ 84%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6948870Z tests/unit/test_nlu_service.py::TestExtractTopic::test_extract_topic_newton_second_law PASSED [ 84%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6971868Z tests/unit/test_nlu_service.py::TestExtractTopic::test_extract_topic_ambiguous_newton PASSED [ 85%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.6994299Z tests/unit/test_nlu_service.py::TestExtractTopic::test_extract_topic_out_of_scope PASSED [ 85%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7016663Z tests/unit/test_nlu_service.py::TestExtractTopic::test_extract_topic_unclear_query PASSED [ 85%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7039188Z tests/unit/test_nlu_service.py::TestExtractTopic::test_extract_topic_with_context PASSED [ 85%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7054499Z tests/unit/test_nlu_service.py::TestPromptBuilding::test_build_extraction_prompt_basic PASSED [ 86%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7069477Z tests/unit/test_nlu_service.py::TestPromptBuilding::test_build_extraction_prompt_with_context PASSED [ 86%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7084548Z tests/unit/test_nlu_service.py::TestGeminiResponseParsing::test_parse_gemini_response_valid_json PASSED [ 86%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7099285Z tests/unit/test_nlu_service.py::TestGeminiResponseParsing::test_parse_gemini_response_with_markdown PASSED [ 86%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7114104Z tests/unit/test_nlu_service.py::TestGeminiResponseParsing::test_parse_gemini_response_with_extra_text PASSED [ 86%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7130886Z tests/unit/test_nlu_service.py::TestGeminiResponseParsing::test_parse_gemini_response_missing_field PASSED [ 87%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7146701Z tests/unit/test_nlu_service.py::TestGeminiResponseParsing::test_parse_gemini_response_invalid_json PASSED [ 87%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7162654Z tests/unit/test_nlu_service.py::TestGeminiResponseParsing::test_parse_gemini_response_malformed_json PASSED [ 87%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7186150Z tests/unit/test_nlu_service.py::TestGradeAppropriateTopics::test_get_grade_9_topics PASSED [ 87%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7208628Z tests/unit/test_nlu_service.py::TestGradeAppropriateTopics::test_get_grade_10_topics PASSED [ 88%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7231271Z tests/unit/test_nlu_service.py::TestGradeAppropriateTopics::test_get_grade_12_topics PASSED [ 88%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7253598Z tests/unit/test_nlu_service.py::TestGradeAppropriateTopics::test_topics_have_required_fields PASSED [ 88%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7275752Z tests/unit/test_nlu_service.py::TestTopicValidation::test_validate_valid_topic_id PASSED [ 88%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7298444Z tests/unit/test_nlu_service.py::TestTopicValidation::test_validate_invalid_topic_id PASSED [ 89%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7321006Z tests/unit/test_nlu_service.py::TestTopicValidation::test_validate_grade_restricted_topic PASSED [ 89%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7335440Z tests/unit/test_nlu_service.py::TestMockExtraction::test_mock_extract_newton_third PASSED [ 89%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7350213Z tests/unit/test_nlu_service.py::TestMockExtraction::test_mock_extract_newton_second PASSED [ 89%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7364773Z tests/unit/test_nlu_service.py::TestMockExtraction::test_mock_extract_ambiguous_newton PASSED [ 90%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7379302Z tests/unit/test_nlu_service.py::TestMockExtraction::test_mock_extract_out_of_scope PASSED [ 90%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7393790Z tests/unit/test_nlu_service.py::TestMockExtraction::test_mock_extract_unclear PASSED [ 90%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7408183Z tests/unit/test_nlu_service.py::TestResponseHelpers::test_fallback_response PASSED [ 90%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7422985Z tests/unit/test_nlu_service.py::TestResponseHelpers::test_error_response PASSED [ 91%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7434708Z tests/unit/test_nlu_service.py::TestSingleton::test_get_nlu_service_singleton PASSED [ 91%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7446351Z tests/unit/test_nlu_service.py::TestSingleton::test_get_nlu_service_returns_instance PASSED [ 91%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7468756Z tests/unit/test_nlu_service.py::TestEdgeCases::test_extract_topic_empty_string PASSED [ 91%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7492065Z tests/unit/test_nlu_service.py::TestEdgeCases::test_extract_topic_whitespace_only PASSED [ 92%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7514305Z tests/unit/test_nlu_service.py::TestEdgeCases::test_extract_topic_special_characters PASSED [ 92%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7536228Z tests/unit/test_nlu_service.py::TestEdgeCases::test_extract_topic_very_long_query PASSED [ 92%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7551986Z tests/unit/test_nlu_service.py::TestEdgeCases::test_parse_gemini_response_nested_json PASSED [ 92%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7656110Z tests/unit/test_script_generation_service.py::TestScriptGenerationServiceInitialization::test_init_without_vertex_ai FAILED [ 93%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7671137Z tests/unit/test_script_generation_service.py::TestScriptGenerationServiceInitialization::test_init_with_custom_project PASSED [ 93%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7699339Z tests/unit/test_script_generation_service.py::TestScriptGenerationServiceInitialization::test_init_with_env_project PASSED [ 93%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7722525Z tests/unit/test_script_generation_service.py::TestGenerateScript::test_generate_script_mock_mode PASSED [ 93%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7745477Z tests/unit/test_script_generation_service.py::TestGenerateScript::test_generate_script_different_interests PASSED [ 93%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7768151Z tests/unit/test_script_generation_service.py::TestGenerateScript::test_generate_script_different_durations PASSED [ 94%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7791132Z tests/unit/test_script_generation_service.py::TestGenerateScript::test_generate_script_sections_structure PASSED [ 94%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7813516Z tests/unit/test_script_generation_service.py::TestGenerateScript::test_generate_script_key_takeaways PASSED [ 94%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7828323Z tests/unit/test_script_generation_service.py::TestPromptBuilding::test_build_script_prompt_basic PASSED [ 94%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7843222Z tests/unit/test_script_generation_service.py::TestPromptBuilding::test_build_script_prompt_empty_rag PASSED [ 95%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7857776Z tests/unit/test_script_generation_service.py::TestPromptBuilding::test_build_script_prompt_requirements PASSED [ 95%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7872920Z tests/unit/test_script_generation_service.py::TestScriptResponseParsing::test_parse_script_response_valid_json PASSED [ 95%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7887464Z tests/unit/test_script_generation_service.py::TestScriptResponseParsing::test_parse_script_response_with_markdown PASSED [ 95%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7902328Z tests/unit/test_script_generation_service.py::TestScriptResponseParsing::test_parse_script_response_with_extra_text PASSED [ 96%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7916944Z tests/unit/test_script_generation_service.py::TestScriptResponseParsing::test_parse_script_response_no_json PASSED [ 96%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7931949Z tests/unit/test_script_generation_service.py::TestScriptResponseParsing::test_parse_script_response_invalid_json PASSED [ 96%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7946614Z tests/unit/test_script_generation_service.py::TestMockGeneration::test_mock_generate_script_structure PASSED [ 96%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7961490Z tests/unit/test_script_generation_service.py::TestMockGeneration::test_mock_generate_script_sections_count PASSED [ 97%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7976088Z tests/unit/test_script_generation_service.py::TestMockGeneration::test_mock_generate_script_personalization PASSED [ 97%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.7990880Z tests/unit/test_script_generation_service.py::TestMockGeneration::test_mock_generate_script_key_takeaways PASSED [ 97%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.8005418Z tests/unit/test_script_generation_service.py::TestScriptIDGeneration::test_generate_script_id_format PASSED [ 97%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.8020378Z tests/unit/test_script_generation_service.py::TestScriptIDGeneration::test_generate_script_id_uniqueness PASSED [ 98%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.8035347Z tests/unit/test_script_generation_service.py::TestScriptIDGeneration::test_generate_script_id_deterministic_prefix PASSED [ 98%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.8046961Z tests/unit/test_script_generation_service.py::TestSingleton::test_get_script_generation_service_singleton PASSED [ 98%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.8058630Z tests/unit/test_script_generation_service.py::TestSingleton::test_get_script_generation_service_returns_instance PASSED [ 98%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.8082562Z tests/unit/test_script_generation_service.py::TestEdgeCases::test_generate_script_empty_rag_content PASSED [ 99%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.8105099Z tests/unit/test_script_generation_service.py::TestEdgeCases::test_generate_script_very_short_duration PASSED [ 99%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.8127451Z tests/unit/test_script_generation_service.py::TestEdgeCases::test_generate_script_long_topic_name PASSED [ 99%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:11.8149821Z tests/unit/test_script_generation_service.py::TestEdgeCases::test_generate_script_special_characters_in_interest PASSED [ 99%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5951350Z tests/unit/test_script_generation_service.py::TestEdgeCases::test_parse_script_response_nested_objects PASSED [100%]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5952189Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5952405Z =================================== FAILURES ===================================
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5953137Z ____________ TestMassAssignment.test_cannot_modify_readonly_fields _____________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5953660Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5953978Z self = <test_api_security.TestMassAssignment object at 0x7f8a42ced410>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5954420Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5954658Z     def test_cannot_modify_readonly_fields(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5955311Z         """Test that readonly fields like user_id, created_at cannot be modified."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5955920Z         # Login as student
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5956326Z         login_response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5956766Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5957333Z             json={"email": "student@test.com", "password": "Password123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5957942Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5958214Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5958551Z >       token = login_response.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5959255Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5959526Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5959721Z tests/security/test_api_security.py:51: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5960370Z ----------------------------- Captured stdout call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5961124Z [Auth Endpoint] Login request received for email: student@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5961864Z [AuthService] Authentication attempt for email: student@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5962875Z 2025-11-01 15:26:59,510 INFO sqlalchemy.engine.Engine BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5966595Z 2025-11-01 15:26:59,510 INFO sqlalchemy.engine.Engine SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5970363Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5970683Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5971010Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5971655Z 2025-11-01 15:26:59,510 INFO sqlalchemy.engine.Engine [cached since 0.0103s ago] ('student@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5972526Z 2025-11-01 15:26:59,511 INFO sqlalchemy.engine.Engine ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5973186Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5973864Z 2025-11-01 15:26:59,506 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5974557Z 2025-11-01 15:26:59,510 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5978323Z 2025-11-01 15:26:59,510 - sqlalchemy.engine.Engine - INFO - SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5982356Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5982687Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5983035Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5983705Z 2025-11-01 15:26:59,510 - sqlalchemy.engine.Engine - INFO - [cached since 0.0103s ago] ('student@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5984563Z 2025-11-01 15:26:59,511 - sqlalchemy.engine.Engine - INFO - ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5985593Z 2025-11-01 15:26:59,511 - app.main - ERROR - Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5989709Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5993072Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5993397Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5993729Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5994070Z [parameters: ('student@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5994643Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5995613Z 2025-11-01 15:26:59,514 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5996614Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5997530Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.5998211Z INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6002097Z INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6005677Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6005979Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6006326Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6006981Z INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.0103s ago] ('student@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6007815Z INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6008776Z ERROR    app.main:main.py:102 Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6012788Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6016329Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6016629Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6016956Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6017301Z [parameters: ('student@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6017896Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6018889Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6020139Z ______ TestExcessiveDataExposure.test_passwords_not_exposed_in_responses _______
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6020662Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6021051Z self = <test_api_security.TestExcessiveDataExposure object at 0x7f8a42cee150>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6021537Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6021751Z     def test_passwords_not_exposed_in_responses(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6022422Z         """Test that password hashes are never returned in API responses."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6023000Z         # Register user
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6023360Z         response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6023753Z             "/api/v1/auth/register",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6024136Z             json={
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6024465Z                 "email": "newuser@test.com",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6024920Z                 "password": "SecretPassword123!",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6025396Z                 "first_name": "New",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6025817Z                 "last_name": "User",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6026221Z                 "role": "student",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6026609Z                 "grade_level": 10,
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6026964Z             },
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6027246Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6027506Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6027819Z         # Check response doesn't contain password
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6028310Z         response_text = response.text.lower()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6028953Z         assert "password" not in response_text or "password_hash" not in response_text
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6029757Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6030073Z         # Check profile endpoint
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6030763Z         login_response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6031216Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6031793Z             json={"email": "newuser@test.com", "password": "SecretPassword123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6032384Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6032673Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6033024Z >       token = login_response.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6033532Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6033806Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6034030Z tests/security/test_api_security.py:101: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6034675Z ----------------------------- Captured stdout call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6035389Z 2025-11-01 15:26:59,598 INFO sqlalchemy.engine.Engine BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6039445Z 2025-11-01 15:26:59,599 INFO sqlalchemy.engine.Engine SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6043121Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6043445Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6043797Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6044471Z 2025-11-01 15:26:59,599 INFO sqlalchemy.engine.Engine [cached since 0.09902s ago] ('newuser@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6045345Z 2025-11-01 15:26:59,599 INFO sqlalchemy.engine.Engine ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6046039Z [Auth Endpoint] Login request received for email: newuser@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6046771Z [AuthService] Authentication attempt for email: newuser@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6047722Z 2025-11-01 15:26:59,607 INFO sqlalchemy.engine.Engine BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6051706Z 2025-11-01 15:26:59,607 INFO sqlalchemy.engine.Engine SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6055518Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6055848Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6056208Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6056885Z 2025-11-01 15:26:59,607 INFO sqlalchemy.engine.Engine [cached since 0.1074s ago] ('newuser@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6057782Z 2025-11-01 15:26:59,608 INFO sqlalchemy.engine.Engine ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6058471Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6059369Z 2025-11-01 15:26:59,595 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6060136Z 2025-11-01 15:26:59,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6063907Z 2025-11-01 15:26:59,599 - sqlalchemy.engine.Engine - INFO - SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6067827Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6068143Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6068492Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6069390Z 2025-11-01 15:26:59,599 - sqlalchemy.engine.Engine - INFO - [cached since 0.09902s ago] ('newuser@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6070315Z 2025-11-01 15:26:59,599 - sqlalchemy.engine.Engine - INFO - ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6071331Z 2025-11-01 15:26:59,600 - app.main - ERROR - Database error on http://testserver/api/v1/auth/register: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6075022Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6078400Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6078763Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6079584Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6079995Z [parameters: ('newuser@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6080628Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6081759Z 2025-11-01 15:26:59,603 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6096659Z 2025-11-01 15:26:59,604 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6097407Z 2025-11-01 15:26:59,607 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6101149Z 2025-11-01 15:26:59,607 - sqlalchemy.engine.Engine - INFO - SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6104491Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6104761Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6105073Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6105698Z 2025-11-01 15:26:59,607 - sqlalchemy.engine.Engine - INFO - [cached since 0.1074s ago] ('newuser@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6106482Z 2025-11-01 15:26:59,608 - sqlalchemy.engine.Engine - INFO - ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6107410Z 2025-11-01 15:26:59,608 - app.main - ERROR - Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6111026Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6114147Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6114429Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6114739Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6115049Z [parameters: ('newuser@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6115544Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6116399Z 2025-11-01 15:26:59,612 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6117283Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6117927Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6118551Z INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6122121Z INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6125336Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6125610Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6125900Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6126451Z INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.09902s ago] ('newuser@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6127175Z INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6128083Z ERROR    app.main:main.py:102 Database error on http://testserver/api/v1/auth/register: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6131707Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6134878Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6135186Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6135505Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6135830Z [parameters: ('newuser@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6136353Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6137229Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6138124Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6138747Z INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6142193Z INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6145394Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6145663Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6146120Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6146658Z INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.1074s ago] ('newuser@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6147347Z INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6148196Z ERROR    app.main:main.py:102 Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6151796Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6154789Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6155059Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6155346Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6155652Z [parameters: ('newuser@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6156148Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6157240Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6158184Z __________ TestExcessiveDataExposure.test_internal_fields_not_exposed __________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6158661Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6159109Z self = <test_api_security.TestExcessiveDataExposure object at 0x7f8a42cec1d0>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6159582Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6159746Z     def test_internal_fields_not_exposed(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6160280Z         """Test that internal fields are not exposed in API responses."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6160778Z         login_response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6161147Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6161776Z             json={"email": "student@test.com", "password": "Password123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6162217Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6162463Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6162761Z >       token = login_response.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6163180Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6163407Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6163584Z tests/security/test_api_security.py:118: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6164123Z ----------------------------- Captured stdout call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6164756Z [Auth Endpoint] Login request received for email: student@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6165377Z [AuthService] Authentication attempt for email: student@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6165996Z 2025-11-01 15:26:59,629 INFO sqlalchemy.engine.Engine BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6169479Z 2025-11-01 15:26:59,629 INFO sqlalchemy.engine.Engine SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6172675Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6172949Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6173243Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6173803Z 2025-11-01 15:26:59,630 INFO sqlalchemy.engine.Engine [cached since 0.1298s ago] ('student@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6174530Z 2025-11-01 15:26:59,630 INFO sqlalchemy.engine.Engine ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6175089Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6175906Z 2025-11-01 15:26:59,626 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6176520Z 2025-11-01 15:26:59,629 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6180044Z 2025-11-01 15:26:59,629 - sqlalchemy.engine.Engine - INFO - SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6183275Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6183551Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6183858Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6184420Z 2025-11-01 15:26:59,630 - sqlalchemy.engine.Engine - INFO - [cached since 0.1298s ago] ('student@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6185174Z 2025-11-01 15:26:59,630 - sqlalchemy.engine.Engine - INFO - ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6186108Z 2025-11-01 15:26:59,630 - app.main - ERROR - Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6189662Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6192772Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6193036Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6193324Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6193623Z [parameters: ('student@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6194124Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6194969Z 2025-11-01 15:26:59,634 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6195780Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6196379Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6196986Z INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6200328Z INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6203400Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6203655Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6203937Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6204458Z INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.1298s ago] ('student@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6205136Z INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6205969Z ERROR    app.main:main.py:102 Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6209606Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6212480Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6212746Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6213035Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6213335Z [parameters: ('student@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6213818Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6214648Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6215582Z __ TestBrokenObjectLevelAuthorization.test_cannot_access_other_users_profile ___
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6216060Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6216422Z self = <test_api_security.TestBrokenObjectLevelAuthorization object at 0x7f8a42cef650>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6216914Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6217093Z     def test_cannot_access_other_users_profile(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6217649Z         """Test that users cannot access other users' profiles by changing IDs."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6218161Z         # Login as student 1
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6218489Z         login1 = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6218824Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6219411Z             json={"email": "student1@test.com", "password": "Password123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6219862Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6220103Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6220554Z >       student1_token = login1.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6220954Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6221231Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6221411Z tests/security/test_api_security.py:151: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6221931Z ----------------------------- Captured stdout call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6222518Z [Auth Endpoint] Login request received for email: student1@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6223131Z [AuthService] Authentication attempt for email: student1@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6223731Z 2025-11-01 15:26:59,646 INFO sqlalchemy.engine.Engine BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6226902Z 2025-11-01 15:26:59,646 INFO sqlalchemy.engine.Engine SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6230519Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6230819Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6231125Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6231704Z 2025-11-01 15:26:59,646 INFO sqlalchemy.engine.Engine [cached since 0.1464s ago] ('student1@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6232430Z 2025-11-01 15:26:59,647 INFO sqlalchemy.engine.Engine ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6232996Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6233592Z 2025-11-01 15:26:59,643 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6234201Z 2025-11-01 15:26:59,646 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6238033Z 2025-11-01 15:26:59,646 - sqlalchemy.engine.Engine - INFO - SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6241527Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6241810Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6242123Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6242724Z 2025-11-01 15:26:59,646 - sqlalchemy.engine.Engine - INFO - [cached since 0.1464s ago] ('student1@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6243530Z 2025-11-01 15:26:59,647 - sqlalchemy.engine.Engine - INFO - ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6244503Z 2025-11-01 15:26:59,647 - app.main - ERROR - Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6247365Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6249651Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6249853Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6250190Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6250419Z [parameters: ('student1@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6250785Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6251409Z 2025-11-01 15:26:59,650 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6252035Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6252487Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6252933Z INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6255345Z INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6257368Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6257545Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6257742Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6258099Z INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.1464s ago] ('student1@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6258563Z INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6259218Z ERROR    app.main:main.py:102 Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6261352Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6263316Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6263486Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6263690Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6263898Z [parameters: ('student1@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6264225Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6264762Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6265392Z ____ TestBrokenObjectLevelAuthorization.test_cannot_modify_other_users_data ____
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6265713Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6265954Z self = <test_api_security.TestBrokenObjectLevelAuthorization object at 0x7f8a42cefb50>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6266275Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6266394Z     def test_cannot_modify_other_users_data(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6266710Z         """Test that users cannot modify other users' data."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6267001Z         # Login as student 1
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6267228Z         login1 = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6267451Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6267765Z             json={"email": "student1@test.com", "password": "Password123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6268071Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6268229Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6268433Z >       student1_token = login1.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6268712Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6268861Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6269118Z tests/security/test_api_security.py:170: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6269599Z ----------------------------- Captured stdout call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6270007Z [Auth Endpoint] Login request received for email: student1@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6270420Z [AuthService] Authentication attempt for email: student1@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6270825Z 2025-11-01 15:26:59,662 INFO sqlalchemy.engine.Engine BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6272898Z 2025-11-01 15:26:59,663 INFO sqlalchemy.engine.Engine SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6274876Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6275056Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6275260Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6275621Z 2025-11-01 15:26:59,663 INFO sqlalchemy.engine.Engine [cached since 0.1629s ago] ('student1@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6276093Z 2025-11-01 15:26:59,663 INFO sqlalchemy.engine.Engine ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6276462Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6276853Z 2025-11-01 15:26:59,659 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6277248Z 2025-11-01 15:26:59,662 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6279434Z 2025-11-01 15:26:59,663 - sqlalchemy.engine.Engine - INFO - SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6281916Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6282216Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6282556Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6282970Z 2025-11-01 15:26:59,663 - sqlalchemy.engine.Engine - INFO - [cached since 0.1629s ago] ('student1@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6283467Z 2025-11-01 15:26:59,663 - sqlalchemy.engine.Engine - INFO - ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6284069Z 2025-11-01 15:26:59,664 - app.main - ERROR - Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6286238Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6288099Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6288272Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6288472Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6288684Z [parameters: ('student1@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6289155Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6289725Z 2025-11-01 15:26:59,667 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6290424Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6290829Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6291229Z INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6293301Z INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6295283Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6295459Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6295652Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6296014Z INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.1629s ago] ('student1@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6296478Z INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6297048Z ERROR    app.main:main.py:102 Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6299306Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6301294Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6301473Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6301668Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6301879Z [parameters: ('student1@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6302208Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6302755Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6303403Z _ TestBrokenObjectLevelAuthorization.test_teacher_cannot_access_other_teachers_classes _
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6303745Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6303979Z self = <test_api_security.TestBrokenObjectLevelAuthorization object at 0x7f8a42ced090>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6304306Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6304456Z     def test_teacher_cannot_access_other_teachers_classes(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6304836Z         """Test that teachers cannot access other teachers' classes."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6305154Z         # Login as teacher 1
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6305383Z         login1 = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6305609Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6305940Z             json={"email": "teacher1@test.com", "password": "TeacherPassword123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6306259Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6306416Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6306620Z >       teacher1_token = login1.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6306896Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6307043Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6307160Z tests/security/test_api_security.py:190: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6307504Z ----------------------------- Captured stdout call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6307906Z [Auth Endpoint] Login request received for email: teacher1@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6308433Z [AuthService] Authentication attempt for email: teacher1@test.com
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6308837Z 2025-11-01 15:26:59,679 INFO sqlalchemy.engine.Engine BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6311046Z 2025-11-01 15:26:59,679 INFO sqlalchemy.engine.Engine SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6313023Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6313200Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6313392Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6313761Z 2025-11-01 15:26:59,680 INFO sqlalchemy.engine.Engine [cached since 0.1797s ago] ('teacher1@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6314232Z 2025-11-01 15:26:59,680 INFO sqlalchemy.engine.Engine ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6314599Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6314991Z 2025-11-01 15:26:59,676 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6315399Z 2025-11-01 15:26:59,679 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6317520Z 2025-11-01 15:26:59,679 - sqlalchemy.engine.Engine - INFO - SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6319724Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6319903Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6320089Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6320456Z 2025-11-01 15:26:59,680 - sqlalchemy.engine.Engine - INFO - [cached since 0.1797s ago] ('teacher1@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6320947Z 2025-11-01 15:26:59,680 - sqlalchemy.engine.Engine - INFO - ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6321819Z 2025-11-01 15:26:59,680 - app.main - ERROR - Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6323981Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6325831Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6326006Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6326203Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6326410Z [parameters: ('teacher1@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6326743Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6327304Z 2025-11-01 15:26:59,684 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6327848Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6328396Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6328799Z INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6331032Z INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6333003Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6333181Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6333383Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6333738Z INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.1797s ago] ('teacher1@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6334198Z INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6334750Z ERROR    app.main:main.py:102 Database error on http://testserver/api/v1/auth/login: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6336878Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6338848Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6339122Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6339319Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6339522Z [parameters: ('teacher1@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6339850Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6340389Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6340959Z _______________ TestRateLimiting.test_api_rate_limiting_enforced _______________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6341236Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6341401Z self = <test_api_security.TestRateLimiting object at 0x7f8a42ccc1d0>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6341647Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6341753Z     def test_api_rate_limiting_enforced(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6342062Z         """Test that API endpoints enforce rate limiting."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6342355Z         # Make rapid requests to an endpoint
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6342618Z         responses = []
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6342809Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6342982Z         for i in range(100):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6343229Z             response = client.get("/api/v1/interests")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6343532Z             responses.append(response.status_code)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6343780Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6343999Z             if response.status_code == 429:  # Too Many Requests
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6344280Z                 break
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6344464Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6344655Z         # Should hit rate limit before 100 requests
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6344986Z >       assert 429 in responses, "API should enforce rate limiting"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6345340Z E       AssertionError: API should enforce rate limiting
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6345648Z E       assert 429 in [403, 403, 403, 403, 403, 403, ...]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6345840Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6345975Z tests/security/test_api_security.py:277: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6346348Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6346921Z 2025-11-01 15:26:59,744 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6347427Z 2025-11-01 15:26:59,750 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6347946Z 2025-11-01 15:26:59,751 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6348447Z 2025-11-01 15:26:59,756 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6348941Z 2025-11-01 15:26:59,756 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6349569Z 2025-11-01 15:26:59,761 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6350060Z 2025-11-01 15:26:59,761 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6350549Z 2025-11-01 15:26:59,766 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6351042Z 2025-11-01 15:26:59,767 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6351528Z 2025-11-01 15:26:59,771 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6352018Z 2025-11-01 15:26:59,772 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6352506Z 2025-11-01 15:26:59,777 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6352980Z 2025-11-01 15:26:59,777 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6353461Z 2025-11-01 15:26:59,782 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6353942Z 2025-11-01 15:26:59,783 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6354427Z 2025-11-01 15:26:59,788 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6355039Z 2025-11-01 15:26:59,788 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6355521Z 2025-11-01 15:26:59,793 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6356005Z 2025-11-01 15:26:59,793 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6356487Z 2025-11-01 15:26:59,798 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6356962Z 2025-11-01 15:26:59,799 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6357442Z 2025-11-01 15:26:59,804 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6357927Z 2025-11-01 15:26:59,804 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6358405Z 2025-11-01 15:26:59,809 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6358900Z 2025-11-01 15:26:59,810 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6359483Z 2025-11-01 15:26:59,816 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6359964Z 2025-11-01 15:26:59,816 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6360441Z 2025-11-01 15:26:59,821 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6360925Z 2025-11-01 15:26:59,822 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6361408Z 2025-11-01 15:26:59,826 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6361888Z 2025-11-01 15:26:59,827 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6362362Z 2025-11-01 15:26:59,832 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6362970Z 2025-11-01 15:26:59,832 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6363453Z 2025-11-01 15:26:59,837 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6363932Z 2025-11-01 15:26:59,837 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6364407Z 2025-11-01 15:26:59,842 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6364895Z 2025-11-01 15:26:59,843 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6365376Z 2025-11-01 15:26:59,847 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6365856Z 2025-11-01 15:26:59,848 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6366339Z 2025-11-01 15:26:59,853 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6366826Z 2025-11-01 15:26:59,853 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6367317Z 2025-11-01 15:26:59,858 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6367804Z 2025-11-01 15:26:59,858 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6368286Z 2025-11-01 15:26:59,863 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6368769Z 2025-11-01 15:26:59,864 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6369383Z 2025-11-01 15:26:59,869 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6369864Z 2025-11-01 15:26:59,869 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6370354Z 2025-11-01 15:26:59,874 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6370960Z 2025-11-01 15:26:59,874 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6371449Z 2025-11-01 15:26:59,880 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6371928Z 2025-11-01 15:26:59,881 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6372413Z 2025-11-01 15:26:59,886 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6372894Z 2025-11-01 15:26:59,886 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6373375Z 2025-11-01 15:26:59,891 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6373853Z 2025-11-01 15:26:59,891 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6374339Z 2025-11-01 15:26:59,896 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6374825Z 2025-11-01 15:26:59,897 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6375313Z 2025-11-01 15:26:59,901 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6375793Z 2025-11-01 15:26:59,902 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6376276Z 2025-11-01 15:26:59,907 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6376758Z 2025-11-01 15:26:59,907 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6377240Z 2025-11-01 15:26:59,912 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6377714Z 2025-11-01 15:26:59,912 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6378199Z 2025-11-01 15:26:59,917 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6378682Z 2025-11-01 15:26:59,918 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6379401Z 2025-11-01 15:26:59,922 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6379883Z 2025-11-01 15:26:59,923 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6380369Z 2025-11-01 15:26:59,928 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6380852Z 2025-11-01 15:26:59,928 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6381330Z 2025-11-01 15:26:59,933 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6381813Z 2025-11-01 15:26:59,934 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6382295Z 2025-11-01 15:26:59,939 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6382780Z 2025-11-01 15:26:59,939 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6383268Z 2025-11-01 15:26:59,945 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6383747Z 2025-11-01 15:26:59,946 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6384229Z 2025-11-01 15:26:59,950 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6384710Z 2025-11-01 15:26:59,951 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6385186Z 2025-11-01 15:26:59,956 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6385670Z 2025-11-01 15:26:59,956 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6386158Z 2025-11-01 15:26:59,961 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6386642Z 2025-11-01 15:26:59,961 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6387260Z 2025-11-01 15:26:59,966 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6387750Z 2025-11-01 15:26:59,967 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6388235Z 2025-11-01 15:26:59,971 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6388719Z 2025-11-01 15:26:59,972 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6389324Z 2025-11-01 15:26:59,976 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6389811Z 2025-11-01 15:26:59,977 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6390290Z 2025-11-01 15:26:59,982 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6390771Z 2025-11-01 15:26:59,982 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6391262Z 2025-11-01 15:26:59,987 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6391751Z 2025-11-01 15:26:59,988 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6392234Z 2025-11-01 15:26:59,992 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6392712Z 2025-11-01 15:26:59,993 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6393194Z 2025-11-01 15:26:59,998 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6393680Z 2025-11-01 15:26:59,999 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6394167Z 2025-11-01 15:27:00,003 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6394643Z 2025-11-01 15:27:00,004 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6395131Z 2025-11-01 15:27:00,010 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6395737Z 2025-11-01 15:27:00,011 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6396218Z 2025-11-01 15:27:00,015 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6396695Z 2025-11-01 15:27:00,016 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6397178Z 2025-11-01 15:27:00,021 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6397659Z 2025-11-01 15:27:00,022 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6398136Z 2025-11-01 15:27:00,027 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6398618Z 2025-11-01 15:27:00,027 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6399204Z 2025-11-01 15:27:00,032 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6399700Z 2025-11-01 15:27:00,032 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6400177Z 2025-11-01 15:27:00,037 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6400662Z 2025-11-01 15:27:00,038 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6401142Z 2025-11-01 15:27:00,042 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6401624Z 2025-11-01 15:27:00,043 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6402100Z 2025-11-01 15:27:00,048 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6402584Z 2025-11-01 15:27:00,048 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6403068Z 2025-11-01 15:27:00,053 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6403677Z 2025-11-01 15:27:00,054 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6404156Z 2025-11-01 15:27:00,059 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6404635Z 2025-11-01 15:27:00,059 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6405115Z 2025-11-01 15:27:00,065 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6405596Z 2025-11-01 15:27:00,065 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6406070Z 2025-11-01 15:27:00,070 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6406555Z 2025-11-01 15:27:00,071 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6407035Z 2025-11-01 15:27:00,077 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6407532Z 2025-11-01 15:27:00,078 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6408012Z 2025-11-01 15:27:00,083 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6408496Z 2025-11-01 15:27:00,083 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6409096Z 2025-11-01 15:27:00,088 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6409581Z 2025-11-01 15:27:00,089 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6410061Z 2025-11-01 15:27:00,093 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6410546Z 2025-11-01 15:27:00,094 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6411027Z 2025-11-01 15:27:00,099 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6411633Z 2025-11-01 15:27:00,099 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6412118Z 2025-11-01 15:27:00,104 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6412601Z 2025-11-01 15:27:00,105 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6413081Z 2025-11-01 15:27:00,110 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6413559Z 2025-11-01 15:27:00,111 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6414040Z 2025-11-01 15:27:00,116 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6414524Z 2025-11-01 15:27:00,116 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6415004Z 2025-11-01 15:27:00,121 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6415492Z 2025-11-01 15:27:00,122 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6415976Z 2025-11-01 15:27:00,126 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6416460Z 2025-11-01 15:27:00,127 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6416975Z 2025-11-01 15:27:00,132 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6417451Z 2025-11-01 15:27:00,132 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6417934Z 2025-11-01 15:27:00,137 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6418418Z 2025-11-01 15:27:00,138 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6418895Z 2025-11-01 15:27:00,144 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6419618Z 2025-11-01 15:27:00,145 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6420110Z 2025-11-01 15:27:00,149 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6420593Z 2025-11-01 15:27:00,150 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6421071Z 2025-11-01 15:27:00,155 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6421555Z 2025-11-01 15:27:00,155 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6422037Z 2025-11-01 15:27:00,160 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6422520Z 2025-11-01 15:27:00,160 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6422997Z 2025-11-01 15:27:00,165 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6423486Z 2025-11-01 15:27:00,166 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6423974Z 2025-11-01 15:27:00,171 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6424458Z 2025-11-01 15:27:00,171 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6424941Z 2025-11-01 15:27:00,176 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6425424Z 2025-11-01 15:27:00,177 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6425905Z 2025-11-01 15:27:00,181 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6426386Z 2025-11-01 15:27:00,182 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6426864Z 2025-11-01 15:27:00,187 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6427346Z 2025-11-01 15:27:00,187 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6427954Z 2025-11-01 15:27:00,192 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6428436Z 2025-11-01 15:27:00,193 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6428915Z 2025-11-01 15:27:00,198 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6429523Z 2025-11-01 15:27:00,198 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6430005Z 2025-11-01 15:27:00,203 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6430486Z 2025-11-01 15:27:00,204 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6430969Z 2025-11-01 15:27:00,210 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6431454Z 2025-11-01 15:27:00,211 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6431942Z 2025-11-01 15:27:00,219 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6432418Z 2025-11-01 15:27:00,219 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6432903Z 2025-11-01 15:27:00,225 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6433387Z 2025-11-01 15:27:00,225 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6433892Z 2025-11-01 15:27:00,230 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6434382Z 2025-11-01 15:27:00,231 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6434867Z 2025-11-01 15:27:00,236 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6435352Z 2025-11-01 15:27:00,237 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6435965Z 2025-11-01 15:27:00,242 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6436442Z 2025-11-01 15:27:00,242 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6436926Z 2025-11-01 15:27:00,247 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6437409Z 2025-11-01 15:27:00,248 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6437893Z 2025-11-01 15:27:00,253 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6438369Z 2025-11-01 15:27:00,253 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6438852Z 2025-11-01 15:27:00,258 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6439435Z 2025-11-01 15:27:00,259 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6439916Z 2025-11-01 15:27:00,264 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6440407Z 2025-11-01 15:27:00,264 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6440889Z 2025-11-01 15:27:00,269 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6441369Z 2025-11-01 15:27:00,270 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6441849Z 2025-11-01 15:27:00,275 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6442333Z 2025-11-01 15:27:00,275 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6442815Z 2025-11-01 15:27:00,281 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6443298Z 2025-11-01 15:27:00,282 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6443787Z 2025-11-01 15:27:00,287 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6444399Z 2025-11-01 15:27:00,287 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6444883Z 2025-11-01 15:27:00,292 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6445366Z 2025-11-01 15:27:00,293 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6445842Z 2025-11-01 15:27:00,297 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6446335Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6446742Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6447249Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6447754Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6448261Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6448760Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6449375Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6449873Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6450365Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6450855Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6451337Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6451827Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6452452Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6452952Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6453438Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6453934Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6454424Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6454909Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6455398Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6455890Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6456377Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6456870Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6457365Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6457853Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6458342Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6458829Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6459426Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6459920Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6460402Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6460893Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6461510Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6462002Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6462488Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6462990Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6463480Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6463970Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6464453Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6464945Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6465437Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6465932Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6466420Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6466911Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6467398Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6467883Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6468375Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6468866Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6469485Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6470137Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6470627Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6471116Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6471604Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6472084Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6472573Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6473061Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6473551Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6474045Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6474548Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6475045Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6475533Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6476028Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6476515Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6477005Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6477489Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6477978Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6478475Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6479195Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6479679Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6480173Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6480667Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6481152Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6481648Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6482140Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6482627Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6483124Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6483615Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6484105Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6484599Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6485080Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6485570Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6486061Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6486549Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6487035Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6487657Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6488143Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6488633Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6489251Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6489740Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6490234Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6490717Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6491204Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6491698Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6492203Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6492688Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6493178Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6493666Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6494151Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6494639Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6495131Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6495618Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6496229Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6496718Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6497206Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6497695Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6498177Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6498666Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6499253Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6499734Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6500223Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6500723Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6501211Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6501693Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6502183Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6502675Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6503162Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6503644Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6504138Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6504627Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6505243Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6505724Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6506213Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6506702Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6507183Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6507673Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6508165Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6508654Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6509267Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6509762Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6510252Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6510742Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6511230Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6511718Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6512205Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6512690Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6513180Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6513797Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6514288Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6514769Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6515260Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6515749Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6516240Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6516762Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6517254Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6517742Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6518240Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6518732Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6519313Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6519802Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6520288Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6520774Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6521266Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6521751Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6522359Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6522851Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6523342Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6523831Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6524314Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6524801Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6525292Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6525775Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6526268Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6526768Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6527257Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6527740Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6528228Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6528718Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6529348Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6529846Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6530342Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6530833Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6531452Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6531941Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6532432Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6532922Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6533410Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6533901Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6534391Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6534876Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6535371Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6535866Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6536354Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6536843Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6537327Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6537818Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6538306Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6538791Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6539406Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6540022Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6540510Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6540997Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6541486Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6541980Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6542471Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6542957Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6543447Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6543937Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6544440Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6544922Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6545410Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6545902Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6546385Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6546874Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/interests "HTTP/1.1 403 Forbidden"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6547411Z ________ TestRateLimiting.test_authenticated_endpoints_have_rate_limits ________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6547695Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6547859Z self = <test_api_security.TestRateLimiting object at 0x7f8a42ccc610>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6548100Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6548357Z     def test_authenticated_endpoints_have_rate_limits(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6548728Z         """Test that authenticated endpoints also have rate limits."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6549167Z         # Login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6549374Z         login_response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6549617Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6549924Z             json={"email": "student@test.com", "password": "Password123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6550229Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6550387Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6550589Z >       token = login_response.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6550867Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6551019Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6551136Z tests/security/test_api_security.py:287: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6551485Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6551884Z 2025-11-01 15:27:00,307 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6552409Z 2025-11-01 15:27:00,308 - app.middleware.security - WARNING - Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6553059Z 2025-11-01 15:27:00,309 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6553589Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6553993Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6554513Z WARNING  app.middleware.security:security.py:180 Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6555157Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6555740Z _____ TestBusinessLogicSecurity.test_cannot_create_class_with_invalid_data _____
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6556033Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6556238Z self = <test_api_security.TestBusinessLogicSecurity object at 0x7f8a42ccca90>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6556649Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6556785Z     def test_cannot_create_class_with_invalid_data(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6557123Z         """Test that class creation validates data properly."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6557418Z         # Login as teacher
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6557732Z         login_response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6558040Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6558719Z             json={"email": "teacher@test.com", "password": "TeacherPassword123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6559404Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6559727Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6560129Z >       token = login_response.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6560512Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6560698Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6560851Z tests/security/test_api_security.py:333: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6561386Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6561886Z 2025-11-01 15:27:00,326 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6562483Z 2025-11-01 15:27:00,327 - app.middleware.security - WARNING - Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6563293Z 2025-11-01 15:27:00,328 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6563916Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6564397Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6565057Z WARNING  app.middleware.security:security.py:180 Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6565798Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6566446Z __________ TestPasswordSecurity.test_password_complexity_requirements __________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6566802Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6567140Z self = <test_authentication_security.TestPasswordSecurity object at 0x7f8a42ba6050>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6567611Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6567797Z     def test_password_complexity_requirements(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6578872Z         """Test that passwords must contain uppercase, lowercase, and numbers."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6579463Z         weak_passwords = [
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6579721Z             "alllowercase",  # No uppercase or numbers
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6580027Z             "ALLUPPERCASE",  # No lowercase or numbers
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6580299Z             "NoNumbers",  # No numbers
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6580539Z             "12345678",  # No letters
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6580790Z             "lowernumber1",  # No uppercase
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6581030Z         ]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6581199Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6581386Z         for password in weak_passwords:
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6581655Z             response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6581907Z                 "/api/v1/auth/register",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6582153Z                 json={
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6582388Z                     "email": f"user{password}@test.com",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6582668Z                     "password": password,
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6582915Z                     "first_name": "Test",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6583166Z                     "last_name": "User",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6583410Z                     "role": "student",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6583641Z                     "grade_level": 10,
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6583868Z                 },
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6584048Z             )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6584213Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6584376Z >           assert (
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6584594Z                 response.status_code == 422
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6584879Z             ), f"Should reject weak password: {password}"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6585219Z E           AssertionError: Should reject weak password: alllowercase
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6585545Z E           assert 500 == 422
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6585847Z E            +  where 500 = <Response [500 Internal Server Error]>.status_code
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6586264Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6586445Z tests/security/test_authentication_security.py:117: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6586862Z ----------------------------- Captured stdout call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6587261Z 2025-11-01 15:27:00,388 INFO sqlalchemy.engine.Engine BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6589475Z 2025-11-01 15:27:00,389 INFO sqlalchemy.engine.Engine SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6591543Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6591721Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6591922Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6592313Z 2025-11-01 15:27:00,389 INFO sqlalchemy.engine.Engine [cached since 0.889s ago] ('useralllowercase@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6592811Z 2025-11-01 15:27:00,389 INFO sqlalchemy.engine.Engine ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6593176Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6593567Z 2025-11-01 15:27:00,385 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6593972Z 2025-11-01 15:27:00,388 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6596050Z 2025-11-01 15:27:00,389 - sqlalchemy.engine.Engine - INFO - SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6598148Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6598320Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6598517Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6598908Z 2025-11-01 15:27:00,389 - sqlalchemy.engine.Engine - INFO - [cached since 0.889s ago] ('useralllowercase@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6599691Z 2025-11-01 15:27:00,389 - sqlalchemy.engine.Engine - INFO - ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6600307Z 2025-11-01 15:27:00,390 - app.main - ERROR - Database error on http://testserver/api/v1/auth/register: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6602472Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6604297Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6604472Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6604662Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6604888Z [parameters: ('useralllowercase@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6605246Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6605966Z 2025-11-01 15:27:00,393 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6606527Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6606929Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6607343Z INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6609526Z INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6611497Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6611667Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6611863Z  LIMIT ? OFFSET ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6612246Z INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.889s ago] ('useralllowercase@test.com', 1, 0)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6612726Z INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6613295Z ERROR    app.main:main.py:102 Database error on http://testserver/api/v1/auth/register: (sqlite3.OperationalError) no such table: users
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6615429Z [SQL: SELECT users.user_id AS users_user_id, users.email AS users_email, users.password_hash AS users_password_hash, users.first_name AS users_first_name, users.last_name AS users_last_name, users.role AS users_role, users.status AS users_status, users.grade_level AS users_grade_level, users.school_id AS users_school_id, users.organization_id AS users_organization_id, users.teacher_data AS users_teacher_data, users.settings AS users_settings, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login_at AS users_last_login_at, users.archived AS users_archived, users.archived_at AS users_archived_at 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6617420Z FROM users 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6617597Z WHERE users.email = ?
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6617785Z  LIMIT ? OFFSET ?]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6618012Z [parameters: ('useralllowercase@test.com', 1, 0)]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6618368Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6618915Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 500 Internal Server Error"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6619606Z _____________ TestSessionManagement.test_logout_invalidates_token ______________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6619893Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6620110Z self = <test_authentication_security.TestSessionManagement object at 0x7f8a42df9150>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6620419Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6620538Z     def test_logout_invalidates_token(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6620849Z         """Test that logout properly invalidates the session."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6621147Z         # Login to get token
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6621375Z         response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6621609Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6621918Z             json={"email": "student@test.com", "password": "TestPassword123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6622244Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6622408Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6622593Z >       assert response.status_code == 200
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6622847Z E       assert 429 == 200
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6623125Z E        +  where 429 = <Response [429 Too Many Requests]>.status_code
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6623350Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6623533Z tests/security/test_authentication_security.py:198: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6623950Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6624472Z 2025-11-01 15:27:00,428 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6624995Z 2025-11-01 15:27:00,429 - app.middleware.security - WARNING - Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6625656Z 2025-11-01 15:27:00,430 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6626184Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6626584Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6627097Z WARNING  app.middleware.security:security.py:180 Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6627734Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6628323Z ____ TestAuthorizationSecurity.test_student_cannot_access_teacher_endpoints ____
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6628625Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6628869Z self = <test_authentication_security.TestAuthorizationSecurity object at 0x7f8a42dfab90>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6629325Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6629468Z     def test_student_cannot_access_teacher_endpoints(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6629828Z         """Test that students cannot access teacher-only endpoints."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6630138Z         # Login as student
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6630361Z         response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6630586Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6630901Z             json={"email": "student@test.com", "password": "TestPassword123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6631214Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6631377Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6631579Z >       student_token = response.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6631865Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6632013Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6632171Z tests/security/test_authentication_security.py:239: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6632548Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6633107Z 2025-11-01 15:27:00,441 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6633615Z 2025-11-01 15:27:00,442 - app.middleware.security - WARNING - Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6634268Z 2025-11-01 15:27:00,443 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6634787Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6635184Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6635691Z WARNING  app.middleware.security:security.py:180 Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6636326Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6636904Z _____ TestAuthorizationSecurity.test_teacher_cannot_access_admin_endpoints _____
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6637216Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6637449Z self = <test_authentication_security.TestAuthorizationSecurity object at 0x7f8a42df86d0>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6637767Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6637901Z     def test_teacher_cannot_access_admin_endpoints(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6638244Z         """Test that teachers cannot access admin-only endpoints."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6638549Z         # Login as teacher
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6638766Z         response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6639093Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6639553Z             json={"email": "teacher@test.com", "password": "TeacherPassword123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6639883Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6640045Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6640244Z >       teacher_token = response.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6640524Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6640673Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6640831Z tests/security/test_authentication_security.py:259: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6641342Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6641736Z 2025-11-01 15:27:00,452 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6642244Z 2025-11-01 15:27:00,453 - app.middleware.security - WARNING - Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6642891Z 2025-11-01 15:27:00,454 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6643404Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6643799Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6644306Z WARNING  app.middleware.security:security.py:180 Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6644943Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6645531Z __ TestAuthorizationSecurity.test_horizontal_privilege_escalation_prevention ___
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6645843Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6646073Z self = <test_authentication_security.TestAuthorizationSecurity object at 0x7f8a44188790>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6646394Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6646537Z     def test_horizontal_privilege_escalation_prevention(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6646884Z         """Test that users cannot access other users' data."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6647164Z         # Login as student 1
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6647391Z         response1 = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6647624Z             "/api/v1/auth/login",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6647923Z             json={"email": "student1@test.com", "password": "Password123!"},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6648229Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6648392Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6648601Z >       student1_token = response1.json()["access_token"]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6648880Z E       KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6649202Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6649367Z tests/security/test_authentication_security.py:276: KeyError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6649873Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6650257Z 2025-11-01 15:27:00,462 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6650762Z 2025-11-01 15:27:00,463 - app.middleware.security - WARNING - Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6651410Z 2025-11-01 15:27:00,464 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6651934Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6652324Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6652828Z WARNING  app.middleware.security:security.py:180 Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6653465Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6654018Z __________________ TestCORSSecurity.test_cors_headers_present __________________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6654274Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6654474Z self = <test_authentication_security.TestCORSSecurity object at 0x7f8a4418a390>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6654770Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6654866Z     def test_cors_headers_present(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6655165Z         """Test that CORS headers are properly configured."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6655287Z         response = client.options("/api/v1/auth/login")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6655359Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6655446Z         # Should have CORS headers
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6655558Z >       assert "access-control-allow-origin" in [
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6655676Z             h.lower() for h in response.headers.keys()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6655745Z         ]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6656001Z E       AssertionError: assert 'access-control-allow-origin' in ['content-length', 'content-type']
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6656122Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6656308Z tests/security/test_authentication_security.py:363: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6656470Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6656634Z 2025-11-01 15:27:00,511 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6656906Z 2025-11-01 15:27:00,511 - app.middleware.security - WARNING - Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6657221Z 2025-11-01 15:27:00,512 - httpx - INFO - HTTP Request: OPTIONS http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6657374Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6657537Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6657810Z WARNING  app.middleware.security:security.py:180 Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6658116Z INFO     httpx:_client.py:1013 HTTP Request: OPTIONS http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6658329Z ____ TestCSRFProtection.test_state_changing_requests_require_authentication ____
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6658334Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6658551Z self = <test_authentication_security.TestCSRFProtection object at 0x7f8a42df9fd0>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6658556Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6658710Z     def test_state_changing_requests_require_authentication(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6658852Z         """Test that POST/PUT/DELETE require authentication."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6658949Z         # Try POST without authentication
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6659138Z         response = client.post(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6659303Z             "/api/v1/classes", json={"name": "Test Class", "subject": "Test"}
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6659370Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6659435Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6659510Z >       assert (
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6659602Z             response.status_code == 401
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6659724Z         ), "State-changing requests should require auth"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6660017Z E       AssertionError: State-changing requests should require auth
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6660100Z E       assert 404 == 401
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6660223Z E        +  where 404 = <Response [404 Not Found]>.status_code
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6660229Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6660400Z tests/security/test_authentication_security.py:388: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6660549Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6660714Z 2025-11-01 15:27:00,525 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6660985Z 2025-11-01 15:27:00,530 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/classes "HTTP/1.1 404 Not Found"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6661140Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6661302Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6661562Z INFO     httpx:_client.py:1013 HTTP Request: POST http://testserver/api/v1/classes "HTTP/1.1 404 Not Found"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6661762Z ______________ TestSecurityHeaders.test_security_headers_present _______________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6661767Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6661979Z self = <test_authentication_security.TestSecurityHeaders object at 0x7f8a42ba6a10>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6661985Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6662090Z     def test_security_headers_present(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6662210Z         """Test that important security headers are set."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6662317Z         response = client.get("/api/v1/auth/login")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6662390Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6662490Z         # Check for important security headers
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6662573Z         headers_to_check = {
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6662680Z             "x-content-type-options": "nosniff",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6662787Z             "x-frame-options": ["DENY", "SAMEORIGIN"],
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6662887Z             "x-xss-protection": "1; mode=block",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6663124Z             "strict-transport-security": None,  # Should exist
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6663199Z         }
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6663270Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6663400Z         for header, expected_value in headers_to_check.items():
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6663537Z             header_value = response.headers.get(header, "").lower()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6663609Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6663699Z             if expected_value is None:
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6663786Z                 # Just check it exists
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6663873Z                 assert header in [
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6663985Z                     h.lower() for h in response.headers.keys()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6664093Z                 ], f"Missing security header: {header}"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6664195Z             elif isinstance(expected_value, list):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6664293Z                 # Check if value is one of the expected
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6664376Z                 assert any(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6664510Z                     ev.lower() in header_value for ev in expected_value
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6664648Z                 ), f"Header {header} has unexpected value: {header_value}"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6664724Z             else:
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6664806Z                 # Check exact value
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6664885Z >               assert (
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6664989Z                     expected_value.lower() in header_value
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6665120Z                 ), f"Header {header} has unexpected value: {header_value}"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6665314Z E               AssertionError: Header x-content-type-options has unexpected value: 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6665406Z E               assert 'nosniff' in ''
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6665597Z E                +  where 'nosniff' = <built-in method lower of str object at 0x7f8a43f5ce30>()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6665807Z E                +    where <built-in method lower of str object at 0x7f8a43f5ce30> = 'nosniff'.lower
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6665813Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6665995Z tests/security/test_authentication_security.py:429: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6666237Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6666390Z 2025-11-01 15:27:00,540 - asyncio - DEBUG - Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6666662Z 2025-11-01 15:27:00,541 - app.middleware.security - WARNING - Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6666962Z 2025-11-01 15:27:00,542 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6667111Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6667280Z DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6667550Z WARNING  app.middleware.security:security.py:180 Rate limit exceeded: testclient on /api/v1/auth/login
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6667839Z INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/auth/login "HTTP/1.1 429 Too Many Requests"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6668035Z _______________ TestTrackProgress.test_track_progress_new_record _______________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6668040Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6668276Z self = <tests.unit.test_content_tracking_service.TestTrackProgress object at 0x7f8a4293c290>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6668281Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6668389Z     def test_track_progress_new_record(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6668504Z         """Test tracking progress creates new record."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6668605Z         service = ContentTrackingService()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6668678Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6668756Z         mock_db = Mock()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6668862Z         mock_content = Mock(spec=ContentMetadata)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6669118Z         mock_content.topic_id = "topic_123"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6669190Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6669368Z         mock_db.query.return_value.filter.return_value.first.side_effect = [
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6669467Z             mock_content,  # First query: content
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6669695Z             None,  # Second query: no existing progress
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6669773Z         ]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6669838Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6669933Z         result = service.track_progress(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670014Z             db=mock_db,
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670096Z             cache_key="test_key",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670182Z             student_id="student_123",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670273Z             current_time_seconds=50,
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670354Z             duration_seconds=300,
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670422Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670494Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670576Z >       assert result is True
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670661Z E       assert False is True
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670666Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670828Z tests/unit/test_content_tracking_service.py:158: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6670977Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6671443Z 2025-11-01 15:27:11,334 - app.services.content_tracking_service - ERROR - Failed to track progress: 'current_position_seconds' is an invalid keyword argument for StudentProgress
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6671599Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6672104Z ERROR    app.services.content_tracking_service:content_tracking_service.py:157 Failed to track progress: 'current_position_seconds' is an invalid keyword argument for StudentProgress
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6672299Z _________ TestTrackCompletion.test_track_completion_no_progress_record _________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6672304Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6672547Z self = <tests.unit.test_content_tracking_service.TestTrackCompletion object at 0x7f8a4293d5d0>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6672552Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6672677Z     def test_track_completion_no_progress_record(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6672823Z         """Test completion tracking creates progress if missing."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6672925Z         service = ContentTrackingService()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6672997Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6673187Z         mock_db = Mock()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6673293Z         mock_content = Mock(spec=ContentMetadata)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6673386Z         mock_content.topic_id = "topic_123"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6673476Z         mock_content.completions = 0
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6673550Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6673680Z         # Mock queries: content, progress, achievement count
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6673854Z         mock_db.query.return_value.filter.return_value.first.side_effect = [
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6673954Z             mock_content,  # First: content query
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674048Z             None,  # Second: no existing progress
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674121Z         ]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674300Z         mock_db.query.return_value.filter.return_value.scalar.return_value = (
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674383Z             1  # Achievement count
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674457Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674522Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674616Z         result = service.track_completion(
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674705Z             db=mock_db,
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674785Z             cache_key="test_key",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674868Z             student_id="student_123",
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6674961Z             watch_duration_seconds=300,
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6675051Z             completion_percentage=100.0,
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6675140Z             skipped_segments=[],
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6675208Z         )
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6675272Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6675365Z         assert isinstance(result, dict)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6675468Z >       assert result["progress_updated"] is True
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6675550Z E       assert False is True
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6675555Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6675721Z tests/unit/test_content_tracking_service.py:263: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6675869Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6676334Z 2025-11-01 15:27:11,360 - app.services.content_tracking_service - ERROR - Failed to track completion: 'completion_percentage' is an invalid keyword argument for StudentProgress
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6676598Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6677097Z ERROR    app.services.content_tracking_service:content_tracking_service.py:253 Failed to track completion: 'completion_percentage' is an invalid keyword argument for StudentProgress
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6677298Z __________ TestGetContentAnalytics.test_get_content_analytics_success __________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6677303Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6677562Z self = <tests.unit.test_content_tracking_service.TestGetContentAnalytics object at 0x7f8a42b28c90>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6677569Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6677686Z     def test_get_content_analytics_success(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6677780Z         """Test getting analytics for content."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6677878Z         service = ContentTrackingService()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6677950Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678030Z         mock_db = Mock()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678134Z         mock_content = Mock(spec=ContentMetadata)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678230Z         mock_content.cache_key = "test_key"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678322Z         mock_content.topic_id = "topic_123"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678411Z         mock_content.views = 100
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678477Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678564Z         # Mock progress stats query
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678648Z         mock_stats = Mock()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678736Z         mock_stats.avg_completion = 85.5
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678823Z         mock_stats.avg_duration = 250.0
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6678895Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6679078Z         # Set up mock queries
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6679215Z         mock_content_query = Mock()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6679488Z         mock_content_query.filter.return_value.first.return_value = mock_content
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6679554Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6679642Z         mock_stats_query = Mock()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6679817Z         mock_stats_query.filter.return_value.first.return_value = mock_stats
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6680058Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6680186Z         # Use side_effect to return different query objects
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6680346Z         mock_db.query.side_effect = [mock_content_query, mock_stats_query]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6680412Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6680589Z         result = service.get_content_analytics(db=mock_db, cache_key="test_key")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6680655Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6680741Z >       assert result is not None
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6680827Z E       assert None is not None
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6680832Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6680993Z tests/unit/test_content_tracking_service.py:298: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6681145Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6681588Z 2025-11-01 15:27:11,374 - app.services.content_tracking_service - ERROR - Failed to get analytics: type object 'StudentProgress' has no attribute 'completion_percentage'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6681737Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6682225Z ERROR    app.services.content_tracking_service:content_tracking_service.py:322 Failed to get analytics: type object 'StudentProgress' has no attribute 'completion_percentage'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6682421Z ________ TestGetContentAnalytics.test_get_content_analytics_zero_views _________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6682426Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6682691Z self = <tests.unit.test_content_tracking_service.TestGetContentAnalytics object at 0x7f8a42b28a90>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6682696Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6682813Z     def test_get_content_analytics_zero_views(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6682910Z         """Test analytics with zero views."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683014Z         service = ContentTrackingService()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683079Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683159Z         mock_db = Mock()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683261Z         mock_content = Mock(spec=ContentMetadata)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683467Z         mock_content.topic_id = "topic_123"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683561Z         mock_content.views = 0
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683627Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683711Z         # Mock empty stats
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683795Z         mock_stats = Mock()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683888Z         mock_stats.avg_completion = None
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6683978Z         mock_stats.avg_duration = None
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6684050Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6684128Z         # Set up mock queries
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6684221Z         mock_content_query = Mock()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6684404Z         mock_content_query.filter.return_value.first.return_value = mock_content
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6684470Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6684557Z         mock_stats_query = Mock()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6684727Z         mock_stats_query.filter.return_value.first.return_value = mock_stats
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6684793Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6684956Z         mock_db.query.side_effect = [mock_content_query, mock_stats_query]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6685026Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6685198Z         result = service.get_content_analytics(db=mock_db, cache_key="test_key")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6685273Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6685355Z >       assert result is not None
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6685443Z E       assert None is not None
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6685448Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6685604Z tests/unit/test_content_tracking_service.py:341: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6685752Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6686190Z 2025-11-01 15:27:11,390 - app.services.content_tracking_service - ERROR - Failed to get analytics: type object 'StudentProgress' has no attribute 'completion_percentage'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6686337Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6686816Z ERROR    app.services.content_tracking_service:content_tracking_service.py:322 Failed to get analytics: type object 'StudentProgress' has no attribute 'completion_percentage'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6687017Z ___________ TestNLUServiceInitialization.test_init_without_vertex_ai ___________
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6687105Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6687347Z self = <tests.unit.test_nlu_service.TestNLUServiceInitialization object at 0x7f8a428724d0>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6687353Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6687452Z     def test_init_without_vertex_ai(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6687578Z         """Test initialization in mock mode (no Vertex AI)."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6687667Z         service = NLUService()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6687732Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6687853Z >       assert service.project_id == "vividly-dev-rich"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6687980Z E       AssertionError: assert '' == 'vividly-dev-rich'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6688070Z E         - vividly-dev-rich
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6688075Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6688192Z tests/unit/test_nlu_service.py:20: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6688351Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6688883Z 2025-11-01 15:27:11,670 - app.services.nlu_service - WARNING - Vertex AI not available: cannot import name 'GenerativeModel' from 'vertexai.generative_models' (unknown location). Running in mock mode.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6689193Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6689721Z WARNING  app.services.nlu_service:nlu_service.py:50 Vertex AI not available: cannot import name 'GenerativeModel' from 'vertexai.generative_models' (unknown location). Running in mock mode.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6689949Z ____ TestScriptGenerationServiceInitialization.test_init_without_vertex_ai _____
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6689959Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6690300Z self = <tests.unit.test_script_generation_service.TestScriptGenerationServiceInitialization object at 0x7f8a42abe0d0>
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6690306Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6690402Z     def test_init_without_vertex_ai(self):
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6690532Z         """Test initialization in mock mode (no Vertex AI)."""
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6690749Z         service = ScriptGenerationService()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6690821Z     
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6690943Z >       assert service.project_id == "vividly-dev-rich"
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6691058Z E       AssertionError: assert '' == 'vividly-dev-rich'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6691149Z E         - vividly-dev-rich
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6691154Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6691316Z tests/unit/test_script_generation_service.py:23: AssertionError
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6691465Z ----------------------------- Captured stderr call -----------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6692045Z 2025-11-01 15:27:11,755 - app.services.script_generation_service - WARNING - Vertex AI not available: cannot import name 'GenerativeModel' from 'vertexai.generative_models' (unknown location). Running in mock mode.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6692191Z ------------------------------ Captured log call -------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6692811Z WARNING  app.services.script_generation_service:script_generation_service.py:47 Vertex AI not available: cannot import name 'GenerativeModel' from 'vertexai.generative_models' (unknown location). Running in mock mode.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6692932Z =============================== warnings summary ===============================
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6693223Z ../../../../../../opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/starlette/formparsers.py:10
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6693789Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/starlette/formparsers.py:10: PendingDeprecationWarning: Please use `import python_multipart` instead.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6693869Z     import multipart
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6693874Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6694221Z ../../../../../../opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pydantic/_internal/_config.py:268: 44 warnings
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6695230Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pydantic/_internal/_config.py:268: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6695498Z     warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6695504Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6695588Z app/core/database.py:35
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6696389Z   /home/runner/work/vividly-mvp/vividly-mvp/backend/app/core/database.py:35: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6696486Z     Base = declarative_base()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6696491Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6696782Z ../../../../../../opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/passlib/utils/__init__.py:854
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6697319Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6697421Z     from crypt import crypt as _crypt
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6697427Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6697511Z app/schemas/teacher.py:20
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6698703Z   /home/runner/work/vividly-mvp/vividly-mvp/backend/app/schemas/teacher.py:20: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6698795Z     @validator("grade_levels")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6698799Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6698887Z app/schemas/teacher.py:38
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6700157Z   /home/runner/work/vividly-mvp/vividly-mvp/backend/app/schemas/teacher.py:38: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6700363Z     @validator("grade_levels")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6700369Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6700632Z ../../../../../../opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pydantic/fields.py:768
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6701555Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pydantic/fields.py:768: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6701809Z     warn('`min_items` is deprecated and will be removed, use `min_length` instead', DeprecationWarning)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6701815Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6702072Z ../../../../../../opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pydantic/fields.py:774
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6702999Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pydantic/fields.py:774: PydanticDeprecatedSince20: `max_items` is deprecated and will be removed, use `max_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6703236Z     warn('`max_items` is deprecated and will be removed, use `max_length` instead', DeprecationWarning)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6703241Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6703334Z app/schemas/teacher.py:112
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6704513Z   /home/runner/work/vividly-mvp/vividly-mvp/backend/app/schemas/teacher.py:112: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6704709Z     @validator("students")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6704714Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6704789Z app/main.py:144
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6705037Z   /home/runner/work/vividly-mvp/vividly-mvp/backend/app/main.py:144: DeprecationWarning: 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6705194Z           on_event is deprecated, use lifespan event handlers instead.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6705266Z   
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6705358Z           Read more about it in the
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6705576Z           [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6705647Z           
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6705736Z     @app.on_event("startup")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6705741Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6706023Z ../../../../../../opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/fastapi/applications.py:4547
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6706302Z ../../../../../../opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/fastapi/applications.py:4547
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6706665Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/fastapi/applications.py:4547: DeprecationWarning: 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6706822Z           on_event is deprecated, use lifespan event handlers instead.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6706892Z   
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6706976Z           Read more about it in the
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6707190Z           [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6707266Z           
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6707369Z     return self.router.on_event(event_type)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6707374Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6707451Z app/main.py:154
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6707701Z   /home/runner/work/vividly-mvp/vividly-mvp/backend/app/main.py:154: DeprecationWarning: 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6707847Z           on_event is deprecated, use lifespan event handlers instead.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6707919Z   
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6708001Z           Read more about it in the
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6708212Z           [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6708383Z           
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6708470Z     @app.on_event("shutdown")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6708475Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6708762Z ../../../../../../opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/_pytest/config/__init__.py:1373
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6709443Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/_pytest/config/__init__.py:1373: PytestConfigWarning: Unknown config option: asyncio_default_fixture_loop_scope
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6709513Z   
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6709671Z     self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6709676Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6709991Z tests/integration/test_student_endpoints.py::TestUpdateStudentProfile::test_update_own_profile_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6710876Z   /home/runner/work/vividly-mvp/vividly-mvp/backend/app/services/student_service.py:192: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6711065Z     metadata={"updated_fields": profile_data.dict(exclude_unset=True)},
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6711070Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6711363Z tests/integration/test_student_endpoints.py::TestUpdateStudentProfile::test_update_own_profile_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6712243Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pydantic/main.py:979: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6712482Z     warnings.warn('The `dict` method is deprecated; use `model_dump` instead.', DeprecationWarning)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6712487Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6712682Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6713402Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/google/cloud/aiplatform/initializer.py:22: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6713725Z     import pkg_resources  # noqa: F401 # Note this is used after copybara replacement
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6713731Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6713920Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6714103Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6714287Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6714466Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6714646Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6715190Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pkg_resources/__init__.py:3147: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('google')`.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6715823Z   Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6715915Z     declare_namespace(pkg)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6715920Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6716099Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6716283Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6716459Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6716673Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6717237Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pkg_resources/__init__.py:3147: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('google.cloud')`.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6717967Z   Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6718056Z     declare_namespace(pkg)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6718062Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6718241Z tests/unit/test_ai_services.py::TestNLUService::test_extract_topic_success
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6718777Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pkg_resources/__init__.py:2559: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('google')`.
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6719627Z   Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6719721Z     declare_namespace(parent)
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6719732Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6719927Z -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6719932Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6720090Z ---------- coverage: platform linux, python 3.11.14-final-0 ----------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6720229Z Name                                         Stmts   Miss Branch BrPart  Cover   Missing
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6720374Z ----------------------------------------------------------------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6720505Z app/__init__.py                                  1      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6720643Z app/api/__init__.py                              0      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6720779Z app/api/v1/__init__.py                           0      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6720912Z app/api/v1/api.py                               16      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6721085Z app/api/v1/endpoints/__init__.py                 2      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6721287Z app/api/v1/endpoints/admin.py                   61      4     10      4    89%   64, 229, 235, 269
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6721630Z app/api/v1/endpoints/auth.py                    43      5      0      0    88%   80, 106-107, 129, 143
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6721847Z app/api/v1/endpoints/cache.py                   53     35      4      0    32%   39, 78-109, 146-182, 212-218, 251-268
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6722051Z app/api/v1/endpoints/classes.py                 42      5     10      5    81%   68, 99, 131, 136, 169
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6722391Z app/api/v1/endpoints/content.py                146     76     28      2    44%   102-103, 171-198, 279, 327-344, 381-390, 421-427, 440, 474-488, 522-537, 571-580, 612-619, 661, 734-847
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6722616Z app/api/v1/endpoints/interests.py               31     14      6      0    46%   32-33, 46-53, 68-78, 91-95
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6722863Z app/api/v1/endpoints/monitoring.py              39     20      6      0    42%   20-25, 42-46, 61-70, 89-100, 115-117, 127
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6723075Z app/api/v1/endpoints/nlu.py                     46     28      4      0    36%   66-85, 120-139, 181-214, 233
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6723343Z app/api/v1/endpoints/notifications.py           63     39      0      0    38%   43, 87-113, 144-159, 191-221, 262-269, 302-312, 343-353
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6723558Z app/api/v1/endpoints/students.py                46      4     12      4    86%   106, 155, 209, 256
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6723794Z app/api/v1/endpoints/teachers.py                58     11      8      1    82%   115-116, 145-148, 172-173, 201-202, 230-233, 342
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6723988Z app/api/v1/endpoints/topics.py                  49      2      8      2    93%   51, 90
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6724124Z app/core/__init__.py                             3      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6724279Z app/core/config.py                              51      1      2      1    96%   69
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6724442Z app/core/database.py                            17      2      2      1    84%   22, 62
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6724790Z app/core/security.py                            53     13     10      2    70%   27, 70-80, 131, 139, 163-168
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6724943Z app/main.py                                     59      4     10      3    90%   84->91, 87->91, 114-115, 161-163
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6725101Z app/middleware/__init__.py                       3      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6725258Z app/middleware/auth.py                         139    139     32      0     0%   8-536
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6725508Z app/middleware/authorization.py                 57     39     22      0    23%   58, 70-114, 126-130, 142-150, 170-175, 191, 208-215
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6725681Z app/middleware/rate_limit.py                    94     94     30      0     0%   8-332
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6725898Z app/middleware/security.py                      98     12     28      5    85%   81->122, 89-103, 114, 118, 128->132, 144-146
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6726057Z app/models/__init__.py                           8      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6726232Z app/models/class_model.py                       23      1      0      0    96%   56
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6726402Z app/models/class_student.py                     12      1      0      0    92%   35
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6726570Z app/models/content.py                           67      3      0      0    96%   85, 127, 162
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6726778Z app/models/content_metadata.py                  77      7     10      5    86%   85, 92, 113, 120, 128, 135, 138
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6726944Z app/models/feature_flag.py                      62     62      0      0     0%   11-209
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6727101Z app/models/interest.py                          23      2      0      0    91%   38, 67
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6727294Z app/models/progress.py                         103      7      6      2    90%   94, 101-104, 132, 189, 230
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6727472Z app/models/request_tracking.py                 119    119      0      0     0%   7-368
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6727707Z app/models/session.py                           18      1      0      0    94%   52
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6727880Z app/models/student_request.py                   29      1      0      0    97%   72
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6728021Z app/models/user.py                              40      1      0      0    98%   83
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6728177Z app/monitoring/__init__.py                       0      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6728358Z app/monitoring/sentry_config.py                 68     68     40      0     0%   8-163
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6728499Z app/schemas/__init__.py                          4      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6728654Z app/schemas/admin.py                            82      0      2      1    99%   55->57
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6728826Z app/schemas/auth.py                            129     21     16      0    74%   44-50, 56-59, 65-67, 241-247
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6729190Z app/schemas/cache.py                            51      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6729358Z app/schemas/content.py                          64      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6729532Z app/schemas/content_delivery.py                 42      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6729715Z app/schemas/content_generation.py               14      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6729889Z app/schemas/content_tracking.py                 37      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6730048Z app/schemas/interest.py                         24      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6730185Z app/schemas/nlu.py                              46      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6730359Z app/schemas/notifications.py                    83      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6730515Z app/schemas/student.py                          61      0      2      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6730675Z app/schemas/students.py                         78     78      2      0     0%   7-285
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6730974Z app/schemas/teacher.py                         102      2     14      5    94%   23->27, 43->42, 45, 117
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6731144Z app/schemas/teachers.py                        105    105      4      0     0%   7-359
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6731294Z app/schemas/topics.py                           84      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6731444Z app/services/__init__.py                         2      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6731641Z app/services/admin_service.py                  179      3     66      4    97%   53, 200, 376->296, 421
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6731803Z app/services/auth_service.py                    59      0     14      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6732298Z app/services/cache_service.py                  249     65     38      8    73%   134-135, 142->154, 150-151, 194, 206, 214-216, 239-241, 263->267, 274-275, 316-318, 343->352, 347-349, 360->367, 363-365, 428-433, 457-459, 473-475, 491-494, 508-510, 525-527, 541-543, 568-596, 641
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6732486Z app/services/circuit_breaker.py                134    134     26      0     0%   15-341
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6732699Z app/services/content_delivery_service.py        82      3     22      0    97%   280-282
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6732969Z app/services/content_generation_service.py      91     14     24      6    81%   95, 106, 122-123, 178, 222, 250-252, 279, 281, 293-295
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6733201Z app/services/content_ingestion_service.py      132      8     20      1    93%   123-125, 230-231, 477-479
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6733398Z app/services/content_service.py                 40     11     12      1    65%   103, 140-158
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6733665Z app/services/content_tracking_service.py       116     12     32      6    88%   131, 139-140, 144->150, 226, 305-312, 358, 360, 392, 403
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6733861Z app/services/email_service.py                   85      6     14      0    94%   93-95, 200-202
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6734094Z app/services/embeddings_service.py              93     39     26      3    56%   48-49, 72-87, 123-165, 196-204, 246, 250-251
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6734401Z app/services/feature_flag_service.py           143    143     54      0     0%   11-479
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6734623Z app/services/interest_service.py                83     68     24      0    14%   28, 42-46, 67-106, 120-126, 165-305
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6734822Z app/services/nlu_service.py                    115     31     36      2    73%   45-48, 101-138, 219-240, 253
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6735029Z app/services/rag_service.py                     64     25     16      4    61%   49-53, 58-60, 92, 111-158, 216->225, 243-247
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6735316Z app/services/request_monitoring_service.py     120     92     56      0    16%   51, 78-104, 116-145, 171-195, 217-227, 236-277, 293-315, 325-327
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6735495Z app/services/request_tracker.py                173    173     38      0     0%   29-691
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6735726Z app/services/script_generation_service.py       67     17     12      2    76%   41-45, 97-131, 205
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6736000Z app/services/student_service.py                111     19     36     11    76%   32, 61, 171, 177->179, 179->181, 181->184, 242, 254, 304, 320, 400-416, 441
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6736252Z app/services/teacher_service.py                130      8     38     11    89%   44, 81, 89->96, 92->89, 97, 168, 197->199, 200, 201->203, 204, 420-421
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6736504Z app/services/topics_service.py                  98     19     56     10    73%   41, 108->112, 113, 169-194, 199-202, 232, 238, 243->241, 252->265, 263
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6736859Z app/services/tts_service.py                    123     42     34     10    66%   48-55, 62-64, 142-150, 154-162, 170-172, 179->183, 186->183, 190->195, 206->213, 214->220, 220->213, 227->239, 277, 283-317, 330-357
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6737142Z app/services/video_service.py                  125     74     18      2    38%   61-62, 140-141, 151-221, 242, 249-256, 262-286, 305-357, 363-404, 408-437, 459-460
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6737403Z app/utils/__init__.py                            0      0      0      0   100%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6737622Z app/utils/dependencies.py                       52     25     24      5    45%   41, 49, 58, 67, 75, 98-103, 144-149, 169-216
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6737800Z app/utils/security.py                           45     16      4      1    61%   57, 108-109, 122-131, 144-152
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6737956Z app/workers/__init__.py                          2      2      0      0     0%   4-6
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6738131Z app/workers/content_worker.py                   87     87     20      0     0%   7-209
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6738277Z ----------------------------------------------------------------------------------------
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6738394Z TOTAL                                         5725   2162   1088    130    59%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6738490Z Coverage HTML written to dir htmlcov
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6738592Z Coverage XML written to file coverage.xml
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6738603Z 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6738782Z FAIL Required test coverage of 80% not reached. Total coverage: 59.14%
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6738911Z =========================== short test summary info ============================
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6739394Z FAILED tests/security/test_api_security.py::TestMassAssignment::test_cannot_modify_readonly_fields - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6739794Z FAILED tests/security/test_api_security.py::TestExcessiveDataExposure::test_passwords_not_exposed_in_responses - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6740162Z FAILED tests/security/test_api_security.py::TestExcessiveDataExposure::test_internal_fields_not_exposed - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6740595Z FAILED tests/security/test_api_security.py::TestBrokenObjectLevelAuthorization::test_cannot_access_other_users_profile - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6741011Z FAILED tests/security/test_api_security.py::TestBrokenObjectLevelAuthorization::test_cannot_modify_other_users_data - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6741485Z FAILED tests/security/test_api_security.py::TestBrokenObjectLevelAuthorization::test_teacher_cannot_access_other_teachers_classes - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6742005Z FAILED tests/security/test_api_security.py::TestRateLimiting::test_api_rate_limiting_enforced - AssertionError: API should enforce rate limiting
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6742114Z assert 429 in [403, 403, 403, 403, 403, 403, ...]
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6742493Z FAILED tests/security/test_api_security.py::TestRateLimiting::test_authenticated_endpoints_have_rate_limits - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6742890Z FAILED tests/security/test_api_security.py::TestBusinessLogicSecurity::test_cannot_create_class_with_invalid_data - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6743419Z FAILED tests/security/test_authentication_security.py::TestPasswordSecurity::test_password_complexity_requirements - AssertionError: Should reject weak password: alllowercase
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6743495Z assert 500 == 422
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6743654Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6744029Z FAILED tests/security/test_authentication_security.py::TestSessionManagement::test_logout_invalidates_token - assert 429 == 200
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6744164Z  +  where 429 = <Response [429 Too Many Requests]>.status_code
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6744616Z FAILED tests/security/test_authentication_security.py::TestAuthorizationSecurity::test_student_cannot_access_teacher_endpoints - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6745059Z FAILED tests/security/test_authentication_security.py::TestAuthorizationSecurity::test_teacher_cannot_access_admin_endpoints - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6745525Z FAILED tests/security/test_authentication_security.py::TestAuthorizationSecurity::test_horizontal_privilege_escalation_prevention - KeyError: 'access_token'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6746098Z FAILED tests/security/test_authentication_security.py::TestCORSSecurity::test_cors_headers_present - AssertionError: assert 'access-control-allow-origin' in ['content-length', 'content-type']
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6746773Z FAILED tests/security/test_authentication_security.py::TestCSRFProtection::test_state_changing_requests_require_authentication - AssertionError: State-changing requests should require auth
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6746854Z assert 404 == 401
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6746970Z  +  where 404 = <Response [404 Not Found]>.status_code
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6747497Z FAILED tests/security/test_authentication_security.py::TestSecurityHeaders::test_security_headers_present - AssertionError: Header x-content-type-options has unexpected value: 
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6747578Z assert 'nosniff' in ''
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6747760Z  +  where 'nosniff' = <built-in method lower of str object at 0x7f8a43f5ce30>()
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6747959Z  +    where <built-in method lower of str object at 0x7f8a43f5ce30> = 'nosniff'.lower
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6748309Z FAILED tests/unit/test_content_tracking_service.py::TestTrackProgress::test_track_progress_new_record - assert False is True
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6748707Z FAILED tests/unit/test_content_tracking_service.py::TestTrackCompletion::test_track_completion_no_progress_record - assert False is True
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6749218Z FAILED tests/unit/test_content_tracking_service.py::TestGetContentAnalytics::test_get_content_analytics_success - assert None is not None
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6749611Z FAILED tests/unit/test_content_tracking_service.py::TestGetContentAnalytics::test_get_content_analytics_zero_views - assert None is not None
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6750032Z FAILED tests/unit/test_nlu_service.py::TestNLUServiceInitialization::test_init_without_vertex_ai - AssertionError: assert '' == 'vividly-dev-rich'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6750115Z   - vividly-dev-rich
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6750640Z FAILED tests/unit/test_script_generation_service.py::TestScriptGenerationServiceInitialization::test_init_without_vertex_ai - AssertionError: assert '' == 'vividly-dev-rich'
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6750720Z   - vividly-dev-rich
Run Tests	Run unit and integration tests	2025-11-01T15:27:16.6750874Z ================= 23 failed, 392 passed, 70 warnings in 53.35s =================
Run Tests	Run unit and integration tests	2025-11-01T15:27:17.7273906Z ##[error]Process completed with exit code 1.
